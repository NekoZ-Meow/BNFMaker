!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.HashedCollections=e():t.HashedCollections=e()}("undefined"!=typeof self?self:this,(()=>(()=>{"use strict";var t={d:(e,r)=>{for(var s in r)t.o(r,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:r[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{HashMap:()=>o,HashSet:()=>l,HashedCollection:()=>n});class r{constructor(t){this.item=t}next(){return this.value=this.item,this.done=!this.item,this.item=this.item?this.item.next:void 0,this}}class s{prepend(t){var e=this.list;if(!(t&&t.append&&t.prepend&&t.detach))throw new Error("An argument without append, prepend, or detach methods was given to `Item#prepend`.");return!(!e||this===t)&&(t.detach(),this.prev&&(t.prev=this.prev,this.prev.next=t),t.next=this,t.list=e,this.prev=t,this===e.head&&(e.head=t),e.tail||(e.tail=this),e.size++,t)}append(t){var e=this.list;if(!(t&&t.append&&t.prepend&&t.detach))throw new Error("An argument without append, prepend, or detach methods was given to `Item#append`.");return!(!e||this===t)&&(t.detach(),this.next&&(t.next=this.next,this.next.prev=t),t.prev=this,t.list=e,this.next=t,this!==e.tail&&e.tail||(e.tail=t),e.size++,t)}detach(){var t=this.list;return t?(t.tail===this&&(t.tail=this.prev),t.head===this&&(t.head=this.next),t.tail===t.head&&(t.tail=null),this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=this.next=this.list=null,t.size--,this):this}}s.prototype.next=s.prototype.prev=s.prototype.list=null;class i{static of(...t){return a(new this,t)}static from(t){return a(new this,t)}constructor(...t){a(this,t)}toArray(){for(var t=this.head,e=[];t;)e.push(t),t=t.next;return e}prepend(t){if(!t)return!1;if(!t.append||!t.prepend||!t.detach)throw new Error("An argument without append, prepend, or detach methods was given to `List#prepend`.");return this.head?this.head.prepend(t):(t.detach(),t.list=this,this.head=t,this.size++,t)}append(t){if(!t)return!1;if(!t.append||!t.prepend||!t.detach)throw new Error("An argument without append, prepend, or detach methods was given to `List#append`.");return this.tail?this.tail.append(t):this.head?this.head.append(t):(t.detach(),t.list=this,this.head=t,this.size++,t)}[Symbol.iterator](){return new r(this.head)}}function a(t,e){var r,s,i;if(!e)return t;if(e[Symbol.iterator])for(i=e[Symbol.iterator](),s={};!s.done;)s=i.next(),t.append(s&&s.value);else for(r=-1;++r<e.length;)t.append(e[r]);return t}i.prototype.size=0,i.prototype.tail=i.prototype.head=null;class n extends Object{tally=0;constructor(){super()}}class h extends s{key;value;constructor(t,e){super(),this.key=t,this.value=e}getKey(){return this.key}getValue(){return this.value}getItem(){return[this.key,this.value]}}class o extends n{aMap;constructor(...t){super(),this.aMap=new Map,this.addAll(...t)}add(t){const[e,r]=t,s=e.hash();return this.aMap.has(s)?this.aMap.get(s)?.append(new h(e,r)):this.aMap.set(s,new i(new h(e,r))),this.tally+=1,this}addAll(...t){return t.forEach((t=>{this.add(t)})),this}clear(){this.aMap.clear(),this.tally=0}forEach(t){const e=this.entries();let r=e.next();for(;void 0!==r.done&&!r.done;){const[s,i]=r.value;t(i,s,this),r=e.next()}}entries(){return this.makeIterator(((t,e)=>[t,e]))}equals(t){if(null==t)return!1;if(!(t instanceof o))return!1;if(this.size()!==t.size())return!1;if(t.hash()!==this.hash())return!1;for(const[e,r]of this.entries()){const s=t.get(e);if(null===s)return!1;if(void 0!==r.equals){if(!1===r.equals(s))return!1}else if(r!==s)return!1}return!0}delete(t){const e=this.search(t);if(null!=e){const r=e.list;return e.detach(),this.tally-=1,0===r.size&&this.aMap.delete(t.hash()),e.getValue()}return null}get(t){const e=this.search(t);return null!==e?e.getValue():null}has(t){return null!==this.search(t)}hash(){return 0===this.tally?0:Array.from(this.aMap.keys()).reduce(((t,e)=>(t+e)%Number.MAX_SAFE_INTEGER))}keys(){return this.makeIterator((t=>t))}makeIterator(t){const e=this.aMap.values();return function*(){let r=e.next();for(;void 0!==r.done&&!r.done;){let s=r.value.head;for(;null!==s;){const[e,r]=s.getItem();yield t(e,r),s=s.next}r=e.next()}}()}search(t){const e=t.hash();if(this.aMap.has(e)){let r=this.aMap.get(e)?.head;for(;r;){const e=r.getKey();if(t.equals(e))return r;r=r.next}}return null}set(t,e){return this.add([t,e])}setDefault(t,e){return this.has(t)?null:(this.set(t,e),e)}size(){return this.tally}values(){return this.makeIterator(((t,e)=>e))}toArray(){const t=new Array;return this.tally,Array.from(this.aMap.values()).forEach((e=>{let r=e.head;for(;r;)t.push(r.getItem()),r=r.next})),t}toString(){const t=this.toArray().map((([t,e])=>`${String(t)} => ${String(e)}`)).join(", ");return`HashMap(${this.size()}) { ${t} }`}}class l extends n{aMap;constructor(...t){super(),this.aMap=new o,this.addAll(...t)}add(t){return this.has(t)||this.aMap.set(t,t),this}addAll(...t){return t.forEach((t=>{this.add(t)})),this}clear(){this.aMap.clear()}delete(t){return this.aMap.delete(t)}entries(){return this.aMap.entries()}equals(t){if(null==t)return!1;if(!(t instanceof l))return!1;if(this.size()!==t.size())return!1;if(t.hash()!==this.hash())return!1;for(const e of this.values())if(!t.has(e))return!1;return!0}forEach(t){const e=this.entries();let r=e.next();for(;void 0!==r.done&&!r.done;){const[s,i]=r.value;t(s,i,this),r=e.next()}}has(t){return this.aMap.has(t)}hash(){return this.aMap.hash()}keys(){return this.aMap.keys()}size(){return this.aMap.size()}values(){return this.keys()}toArray(){return this.aMap.toArray().map((t=>t[0]))}toString(){const t=this.toArray().map((t=>String(t))).join(", ");return`HashSet(${this.size()}) { ${t} }`}}return e})()));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxLQUFLbUQsS0FBS2QsVUFBVXVELEtBQUt6RSxHQUFTQSxFQUFLLElBQ2xELENBS091RSxXQUNILE1BQU1DLEVBQWEzRixLQUFLcUMsVUFDbkJ1RCxLQUFLNUUsR0FBVTZFLE9BQU83RSxLQUN0QjhFLEtBQUssTUFDVixNQUFPLFdBQVc5RixLQUFLZ0MsYUFBYTJELEtBQ3hDLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9IYXNoZWRDb2xsZWN0aW9ucy93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vSGFzaGVkQ29sbGVjdGlvbnMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vSGFzaGVkQ29sbGVjdGlvbnMvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL0hhc2hlZENvbGxlY3Rpb25zL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vSGFzaGVkQ29sbGVjdGlvbnMvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9IYXNoZWRDb2xsZWN0aW9ucy8uLi8uLi9ub2RlX21vZHVsZXMvbGlua2VkLWxpc3QvaW5kZXguanMiLCJ3ZWJwYWNrOi8vSGFzaGVkQ29sbGVjdGlvbnMvLi9zcmMvaGFzaGVkLWNvbGxlY3Rpb25zL0hhc2hlZENvbGxlY3Rpb24udHMiLCJ3ZWJwYWNrOi8vSGFzaGVkQ29sbGVjdGlvbnMvLi9zcmMvaGFzaGVkLWNvbGxlY3Rpb25zL0hhc2hNYXAudHMiLCJ3ZWJwYWNrOi8vSGFzaGVkQ29sbGVjdGlvbnMvLi9zcmMvaGFzaGVkLWNvbGxlY3Rpb25zL0hhc2hTZXQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiSGFzaGVkQ29sbGVjdGlvbnNcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiSGFzaGVkQ29sbGVjdGlvbnNcIl0gPSBmYWN0b3J5KCk7XG59KSh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDogdGhpcywgKCkgPT4ge1xucmV0dXJuICIsIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiLy8gQ3JlYXRlcyBhIG5ldyBgSXRlcmF0b3JgIGZvciBsb29waW5nIG92ZXIgdGhlIGBMaXN0YC5cbmNsYXNzIEl0ZXJhdG9yIHtcbiAgY29uc3RydWN0b3IoaXRlbSkge1xuICAgIHRoaXMuaXRlbSA9IGl0ZW1cbiAgfVxuXG4gIC8vIE1vdmUgdGhlIGBJdGVyYXRvcmAgdG8gdGhlIG5leHQgaXRlbS5cbiAgbmV4dCgpIHtcbiAgICB0aGlzLnZhbHVlID0gdGhpcy5pdGVtXG4gICAgdGhpcy5kb25lID0gIXRoaXMuaXRlbVxuICAgIHRoaXMuaXRlbSA9IHRoaXMuaXRlbSA/IHRoaXMuaXRlbS5uZXh0IDogdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxufVxuXG4vLyBDcmVhdGVzIGEgbmV3IGBJdGVtYDpcbi8vIEFuIGl0ZW0gaXMgYSBiaXQgbGlrZSBET00gbm9kZTogSXQga25vd3Mgb25seSBhYm91dCBpdHMg4oCccGFyZW504oCdIChgbGlzdGApLFxuLy8gdGhlIGl0ZW0gYmVmb3JlIGl0IChgcHJldmApLCBhbmQgdGhlIGl0ZW0gYWZ0ZXIgaXQgKGBuZXh0YCkuXG5leHBvcnQgY2xhc3MgSXRlbSB7XG4gIC8vIFByZXBlbmRzIHRoZSBnaXZlbiBpdGVtICpiZWZvcmUqIHRoZSBpdGVtIG9wZXJhdGVkIG9uLlxuICBwcmVwZW5kKGl0ZW0pIHtcbiAgICB2YXIgbGlzdCA9IHRoaXMubGlzdFxuXG4gICAgaWYgKCFpdGVtIHx8ICFpdGVtLmFwcGVuZCB8fCAhaXRlbS5wcmVwZW5kIHx8ICFpdGVtLmRldGFjaCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnQW4gYXJndW1lbnQgd2l0aG91dCBhcHBlbmQsIHByZXBlbmQsIG9yIGRldGFjaCBtZXRob2RzIHdhcyBnaXZlbiB0byBgSXRlbSNwcmVwZW5kYC4nXG4gICAgICApXG4gICAgfVxuXG4gICAgLy8gSWYgc2VsZiBpcyBkZXRhY2hlZCBvciBwcmVwZW5kaW5nIG91cnNlbHZlcywgcmV0dXJuIGZhbHNlLlxuICAgIGlmICghbGlzdCB8fCB0aGlzID09PSBpdGVtKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICAvLyBEZXRhY2ggdGhlIHByZXBlbmRlZS5cbiAgICBpdGVtLmRldGFjaCgpXG5cbiAgICAvLyBJZiBzZWxmIGhhcyBhIHByZXZpb3VzIGl0ZW0uLi5cbiAgICBpZiAodGhpcy5wcmV2KSB7XG4gICAgICBpdGVtLnByZXYgPSB0aGlzLnByZXZcbiAgICAgIHRoaXMucHJldi5uZXh0ID0gaXRlbVxuICAgIH1cblxuICAgIC8vIENvbm5lY3QgdGhlIHByZXBlbmRlZS5cbiAgICBpdGVtLm5leHQgPSB0aGlzXG4gICAgaXRlbS5saXN0ID0gbGlzdFxuXG4gICAgLy8gU2V0IHRoZSBwcmV2aW91cyBpdGVtIG9mIHNlbGYgdG8gdGhlIHByZXBlbmRlZS5cbiAgICB0aGlzLnByZXYgPSBpdGVtXG5cbiAgICAvLyBJZiBzZWxmIGlzIHRoZSBmaXJzdCBpdGVtIGluIHRoZSBwYXJlbnQgbGlzdCwgbGluayB0aGUgbGlzdHMgZmlyc3QgaXRlbSB0b1xuICAgIC8vIHRoZSBwcmVwZW5kZWUuXG4gICAgaWYgKHRoaXMgPT09IGxpc3QuaGVhZCkge1xuICAgICAgbGlzdC5oZWFkID0gaXRlbVxuICAgIH1cblxuICAgIC8vIElmIHRoZSB0aGUgcGFyZW50IGxpc3QgaGFzIG5vIGxhc3QgaXRlbSwgbGluayB0aGUgbGlzdHMgbGFzdCBpdGVtIHRvIHNlbGYuXG4gICAgaWYgKCFsaXN0LnRhaWwpIHtcbiAgICAgIGxpc3QudGFpbCA9IHRoaXNcbiAgICB9XG5cbiAgICBsaXN0LnNpemUrK1xuXG4gICAgcmV0dXJuIGl0ZW1cbiAgfVxuXG4gIC8vIEFwcGVuZHMgdGhlIGdpdmVuIGl0ZW0gKmFmdGVyKiB0aGUgaXRlbSBvcGVyYXRlZCBvbi5cbiAgYXBwZW5kKGl0ZW0pIHtcbiAgICB2YXIgbGlzdCA9IHRoaXMubGlzdFxuXG4gICAgaWYgKCFpdGVtIHx8ICFpdGVtLmFwcGVuZCB8fCAhaXRlbS5wcmVwZW5kIHx8ICFpdGVtLmRldGFjaCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnQW4gYXJndW1lbnQgd2l0aG91dCBhcHBlbmQsIHByZXBlbmQsIG9yIGRldGFjaCBtZXRob2RzIHdhcyBnaXZlbiB0byBgSXRlbSNhcHBlbmRgLidcbiAgICAgIClcbiAgICB9XG5cbiAgICAvLyBJZiBzZWxmIGlzIGRldGFjaGVkIG9yIGFwcGVuZGluZyBvdXJzZWx2ZXMsIHJldHVybiBmYWxzZS5cbiAgICBpZiAoIWxpc3QgfHwgdGhpcyA9PT0gaXRlbSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgLy8gRGV0YWNoIHRoZSBhcHBlbmRlZS5cbiAgICBpdGVtLmRldGFjaCgpXG5cbiAgICAvLyBJZiBzZWxmIGhhcyBhIG5leHQgaXRlbeKAplxuICAgIGlmICh0aGlzLm5leHQpIHtcbiAgICAgIGl0ZW0ubmV4dCA9IHRoaXMubmV4dFxuICAgICAgdGhpcy5uZXh0LnByZXYgPSBpdGVtXG4gICAgfVxuXG4gICAgLy8gQ29ubmVjdCB0aGUgYXBwZW5kZWUuXG4gICAgaXRlbS5wcmV2ID0gdGhpc1xuICAgIGl0ZW0ubGlzdCA9IGxpc3RcblxuICAgIC8vIFNldCB0aGUgbmV4dCBpdGVtIG9mIHNlbGYgdG8gdGhlIGFwcGVuZGVlLlxuICAgIHRoaXMubmV4dCA9IGl0ZW1cblxuICAgIC8vIElmIHRoZSB0aGUgcGFyZW50IGxpc3QgaGFzIG5vIGxhc3QgaXRlbSBvciBpZiBzZWxmIGlzIHRoZSBwYXJlbnQgbGlzdHMgbGFzdFxuICAgIC8vIGl0ZW0sIGxpbmsgdGhlIGxpc3RzIGxhc3QgaXRlbSB0byB0aGUgYXBwZW5kZWUuXG4gICAgaWYgKHRoaXMgPT09IGxpc3QudGFpbCB8fCAhbGlzdC50YWlsKSB7XG4gICAgICBsaXN0LnRhaWwgPSBpdGVtXG4gICAgfVxuXG4gICAgbGlzdC5zaXplKytcblxuICAgIHJldHVybiBpdGVtXG4gIH1cblxuICAvLyBEZXRhY2hlcyB0aGUgaXRlbSBvcGVyYXRlZCBvbiBmcm9tIGl0cyBwYXJlbnQgbGlzdC5cbiAgZGV0YWNoKCkge1xuICAgIHZhciBsaXN0ID0gdGhpcy5saXN0XG5cbiAgICBpZiAoIWxpc3QpIHtcbiAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuXG4gICAgLy8gSWYgc2VsZiBpcyB0aGUgbGFzdCBpdGVtIGluIHRoZSBwYXJlbnQgbGlzdCwgbGluayB0aGUgbGlzdHMgbGFzdCBpdGVtIHRvXG4gICAgLy8gdGhlIHByZXZpb3VzIGl0ZW0uXG4gICAgaWYgKGxpc3QudGFpbCA9PT0gdGhpcykge1xuICAgICAgbGlzdC50YWlsID0gdGhpcy5wcmV2XG4gICAgfVxuXG4gICAgLy8gSWYgc2VsZiBpcyB0aGUgZmlyc3QgaXRlbSBpbiB0aGUgcGFyZW50IGxpc3QsIGxpbmsgdGhlIGxpc3RzIGZpcnN0IGl0ZW0gdG9cbiAgICAvLyB0aGUgbmV4dCBpdGVtLlxuICAgIGlmIChsaXN0LmhlYWQgPT09IHRoaXMpIHtcbiAgICAgIGxpc3QuaGVhZCA9IHRoaXMubmV4dFxuICAgIH1cblxuICAgIC8vIElmIGJvdGggdGhlIGxhc3QgYW5kIGZpcnN0IGl0ZW1zIGluIHRoZSBwYXJlbnQgbGlzdCBhcmUgdGhlIHNhbWUsIHJlbW92ZVxuICAgIC8vIHRoZSBsaW5rIHRvIHRoZSBsYXN0IGl0ZW0uXG4gICAgaWYgKGxpc3QudGFpbCA9PT0gbGlzdC5oZWFkKSB7XG4gICAgICBsaXN0LnRhaWwgPSBudWxsXG4gICAgfVxuXG4gICAgLy8gSWYgYSBwcmV2aW91cyBpdGVtIGV4aXN0cywgbGluayBpdHMgbmV4dCBpdGVtIHRvIHNlbGZzIG5leHQgaXRlbS5cbiAgICBpZiAodGhpcy5wcmV2KSB7XG4gICAgICB0aGlzLnByZXYubmV4dCA9IHRoaXMubmV4dFxuICAgIH1cblxuICAgIC8vIElmIGEgbmV4dCBpdGVtIGV4aXN0cywgbGluayBpdHMgcHJldmlvdXMgaXRlbSB0byBzZWxmcyBwcmV2aW91cyBpdGVtLlxuICAgIGlmICh0aGlzLm5leHQpIHtcbiAgICAgIHRoaXMubmV4dC5wcmV2ID0gdGhpcy5wcmV2XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIGxpbmtzIGZyb20gc2VsZiB0byBib3RoIHRoZSBuZXh0IGFuZCBwcmV2aW91cyBpdGVtcywgYW5kIHRvIHRoZVxuICAgIC8vIHBhcmVudCBsaXN0LlxuICAgIHRoaXMucHJldiA9IHRoaXMubmV4dCA9IHRoaXMubGlzdCA9IG51bGxcblxuICAgIGxpc3Quc2l6ZS0tXG5cbiAgICByZXR1cm4gdGhpc1xuICB9XG59XG5cbkl0ZW0ucHJvdG90eXBlLm5leHQgPSBJdGVtLnByb3RvdHlwZS5wcmV2ID0gSXRlbS5wcm90b3R5cGUubGlzdCA9IG51bGxcblxuLy8gQ3JlYXRlcyBhIG5ldyBMaXN0OiBBIGxpbmtlZCBsaXN0IGlzIGEgYml0IGxpa2UgYW4gQXJyYXksIGJ1dCBrbm93cyBub3RoaW5nXG4vLyBhYm91dCBob3cgbWFueSBpdGVtcyBhcmUgaW4gaXQsIGFuZCBrbm93cyBvbmx5IGFib3V0IGl0cyBmaXJzdCAoYGhlYWRgKSBhbmRcbi8vIGxhc3QgKGB0YWlsYCkgaXRlbXMuXG4vLyBFYWNoIGl0ZW0gKGUuZy4gYGhlYWRgLCBgdGFpbGAsICZjLikga25vd3Mgd2hpY2ggaXRlbSBjb21lcyBiZWZvcmUgb3IgYWZ0ZXJcbi8vIGl0IChpdHMgbW9yZSBsaWtlIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgRE9NIGluIEphdmFTY3JpcHQpLlxuZXhwb3J0IGNsYXNzIExpc3Qge1xuICAvLyBDcmVhdGVzIGEgbmV3IGxpc3QgZnJvbSB0aGUgYXJndW1lbnRzIChlYWNoIGEgbGlzdCBpdGVtKSBwYXNzZWQgaW4uXG4gIHN0YXRpYyBvZiguLi5pdGVtcykge1xuICAgIHJldHVybiBhcHBlbmRBbGwobmV3IHRoaXMoKSwgaXRlbXMpXG4gIH1cblxuICAvLyBDcmVhdGVzIGEgbmV3IGxpc3QgZnJvbSB0aGUgZ2l2ZW4gYXJyYXktbGlrZSBvYmplY3QgKGVhY2ggYSBsaXN0IGl0ZW0pIHBhc3NlZFxuICAvLyBpbi5cbiAgc3RhdGljIGZyb20oaXRlbXMpIHtcbiAgICByZXR1cm4gYXBwZW5kQWxsKG5ldyB0aGlzKCksIGl0ZW1zKVxuICB9XG5cbiAgY29uc3RydWN0b3IoLi4uaXRlbXMpIHtcbiAgICBhcHBlbmRBbGwodGhpcywgaXRlbXMpXG4gIH1cblxuICAvLyBSZXR1cm5zIHRoZSBsaXN04oCZcyBpdGVtcyBhcyBhbiBhcnJheS5cbiAgLy8gVGhpcyBkb2VzICpub3QqIGRldGFjaCB0aGUgaXRlbXMuXG4gIHRvQXJyYXkoKSB7XG4gICAgdmFyIGl0ZW0gPSB0aGlzLmhlYWRcbiAgICB2YXIgcmVzdWx0ID0gW11cblxuICAgIHdoaWxlIChpdGVtKSB7XG4gICAgICByZXN1bHQucHVzaChpdGVtKVxuICAgICAgaXRlbSA9IGl0ZW0ubmV4dFxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuXG4gIC8vIFByZXBlbmRzIHRoZSBnaXZlbiBpdGVtIHRvIHRoZSBsaXN0LlxuICAvLyBgaXRlbWAgd2lsbCBiZSB0aGUgbmV3IGZpcnN0IGl0ZW0gKGBoZWFkYCkuXG4gIHByZXBlbmQoaXRlbSkge1xuICAgIGlmICghaXRlbSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKCFpdGVtLmFwcGVuZCB8fCAhaXRlbS5wcmVwZW5kIHx8ICFpdGVtLmRldGFjaCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnQW4gYXJndW1lbnQgd2l0aG91dCBhcHBlbmQsIHByZXBlbmQsIG9yIGRldGFjaCBtZXRob2RzIHdhcyBnaXZlbiB0byBgTGlzdCNwcmVwZW5kYC4nXG4gICAgICApXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaGVhZCkge1xuICAgICAgcmV0dXJuIHRoaXMuaGVhZC5wcmVwZW5kKGl0ZW0pXG4gICAgfVxuXG4gICAgaXRlbS5kZXRhY2goKVxuICAgIGl0ZW0ubGlzdCA9IHRoaXNcbiAgICB0aGlzLmhlYWQgPSBpdGVtXG4gICAgdGhpcy5zaXplKytcblxuICAgIHJldHVybiBpdGVtXG4gIH1cblxuICAvLyBBcHBlbmRzIHRoZSBnaXZlbiBpdGVtIHRvIHRoZSBsaXN0LlxuICAvLyBgaXRlbWAgd2lsbCBiZSB0aGUgbmV3IGxhc3QgaXRlbSAoYHRhaWxgKSBpZiB0aGUgbGlzdCBoYWQgYSBmaXJzdCBpdGVtLCBhbmRcbiAgLy8gaXRzIGZpcnN0IGl0ZW0gKGBoZWFkYCkgb3RoZXJ3aXNlLlxuICBhcHBlbmQoaXRlbSkge1xuICAgIGlmICghaXRlbSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKCFpdGVtLmFwcGVuZCB8fCAhaXRlbS5wcmVwZW5kIHx8ICFpdGVtLmRldGFjaCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnQW4gYXJndW1lbnQgd2l0aG91dCBhcHBlbmQsIHByZXBlbmQsIG9yIGRldGFjaCBtZXRob2RzIHdhcyBnaXZlbiB0byBgTGlzdCNhcHBlbmRgLidcbiAgICAgIClcbiAgICB9XG5cbiAgICAvLyBJZiBzZWxmIGhhcyBhIGxhc3QgaXRlbSwgZGVmZXIgYXBwZW5kaW5nIHRvIHRoZSBsYXN0IGl0ZW1zIGFwcGVuZCBtZXRob2QsXG4gICAgLy8gYW5kIHJldHVybiB0aGUgcmVzdWx0LlxuICAgIGlmICh0aGlzLnRhaWwpIHtcbiAgICAgIHJldHVybiB0aGlzLnRhaWwuYXBwZW5kKGl0ZW0pXG4gICAgfVxuXG4gICAgLy8gSWYgc2VsZiBoYXMgYSBmaXJzdCBpdGVtLCBkZWZlciBhcHBlbmRpbmcgdG8gdGhlIGZpcnN0IGl0ZW1zIGFwcGVuZCBtZXRob2QsXG4gICAgLy8gYW5kIHJldHVybiB0aGUgcmVzdWx0LlxuICAgIGlmICh0aGlzLmhlYWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmhlYWQuYXBwZW5kKGl0ZW0pXG4gICAgfVxuXG4gICAgLy8g4oCmb3RoZXJ3aXNlLCB0aGVyZSBpcyBubyBgdGFpbGAgb3IgYGhlYWRgIGl0ZW0geWV0LlxuICAgIGl0ZW0uZGV0YWNoKClcbiAgICBpdGVtLmxpc3QgPSB0aGlzXG4gICAgdGhpcy5oZWFkID0gaXRlbVxuICAgIHRoaXMuc2l6ZSsrXG5cbiAgICByZXR1cm4gaXRlbVxuICB9XG5cbiAgLy8gQ3JlYXRlcyBhbiBpdGVyYXRvciBmcm9tIHRoZSBsaXN0LlxuICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICByZXR1cm4gbmV3IEl0ZXJhdG9yKHRoaXMuaGVhZClcbiAgfVxufVxuXG5MaXN0LnByb3RvdHlwZS5zaXplID0gMFxuTGlzdC5wcm90b3R5cGUudGFpbCA9IExpc3QucHJvdG90eXBlLmhlYWQgPSBudWxsXG5cbi8vIENyZWF0ZXMgYSBuZXcgbGlzdCBmcm9tIHRoZSBpdGVtcyBwYXNzZWQgaW4uXG5mdW5jdGlvbiBhcHBlbmRBbGwobGlzdCwgaXRlbXMpIHtcbiAgdmFyIGluZGV4XG4gIHZhciBpdGVtXG4gIHZhciBpdGVyYXRvclxuXG4gIGlmICghaXRlbXMpIHtcbiAgICByZXR1cm4gbGlzdFxuICB9XG5cbiAgaWYgKGl0ZW1zW1N5bWJvbC5pdGVyYXRvcl0pIHtcbiAgICBpdGVyYXRvciA9IGl0ZW1zW1N5bWJvbC5pdGVyYXRvcl0oKVxuICAgIGl0ZW0gPSB7fVxuXG4gICAgd2hpbGUgKCFpdGVtLmRvbmUpIHtcbiAgICAgIGl0ZW0gPSBpdGVyYXRvci5uZXh0KClcbiAgICAgIGxpc3QuYXBwZW5kKGl0ZW0gJiYgaXRlbS52YWx1ZSlcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaW5kZXggPSAtMVxuXG4gICAgd2hpbGUgKCsraW5kZXggPCBpdGVtcy5sZW5ndGgpIHtcbiAgICAgIGxpc3QuYXBwZW5kKGl0ZW1zW2luZGV4XSlcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbGlzdFxufVxuIiwiaW1wb3J0IHsgSGFzaGFibGUgfSBmcm9tIFwiLi9IYXNoYWJsZVwiO1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgSGFzaGVkQ29sbGVjdGlvbjxLIGV4dGVuZHMgSGFzaGFibGUsIFY+IGV4dGVuZHMgT2JqZWN0IHtcbiAgICBwcm90ZWN0ZWQgdGFsbHkgPSAwOyAvL+i/veWKoOOBleOCjOOBpuOBhOOCi+imgee0oOOBruaVsFxuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgfVxuXG4gICAgcHVibGljIGFic3RyYWN0IGFkZChhbk9iamVjdDogdW5rbm93bik6IHZvaWQ7XG4gICAgcHVibGljIGFic3RyYWN0IGFkZEFsbCguLi5vYmplY3RzOiBBcnJheTx1bmtub3duPik6IHZvaWQ7XG4gICAgcHVibGljIGFic3RyYWN0IGNsZWFyKCk6IHZvaWQ7XG4gICAgcHVibGljIGFic3RyYWN0IGRlbGV0ZShhbk9iamVjdDogSyk6IFYgfCBudWxsO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBmb3JFYWNoKFxuICAgICAgICBjYWxsYmFja2ZuOiAodmFsdWUxOiBWLCB2YWx1ZTI6IEssIHNlbGY6IEhhc2hlZENvbGxlY3Rpb248SywgVj4pID0+IHZvaWRcbiAgICApOiB2b2lkO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBoYXMoYW5PYmplY3Q6IEspOiBib29sZWFuO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBzaXplKCk6IG51bWJlcjtcbiAgICBwdWJsaWMgYWJzdHJhY3QgdG9BcnJheSgpOiBBcnJheTx1bmtub3duPjtcbn1cbiIsImltcG9ydCB7IEl0ZW0sIExpc3QgfSBmcm9tIFwibGlua2VkLWxpc3RcIjtcblxuaW1wb3J0IHsgSGFzaGFibGUgfSBmcm9tIFwiLi9IYXNoYWJsZVwiO1xuaW1wb3J0IHsgSGFzaGVkQ29sbGVjdGlvbiB9IGZyb20gXCIuL0hhc2hlZENvbGxlY3Rpb25cIjtcblxuLyoqXG4gKiBIYXNoTWFw44Gn5L2/55So44GZ44KLTGlua2VkTGlzdOOBruimgee0oOOCkuihqOOBmeOCr+ODqeOCuVxuICovXG5jbGFzcyBEaWN0aW9uYXJ5SXRlbTxLIGV4dGVuZHMgSGFzaGFibGUsIFY+IGV4dGVuZHMgSXRlbSB7XG4gICAgcHJpdmF0ZSBrZXk6IEs7XG4gICAgcHJpdmF0ZSB2YWx1ZTogVjtcblxuICAgIC8qKlxuICAgICAqIExpbmtlZExpc3Tjga7opoHntKDjgpLnlJ/miJDjgZnjgotcbiAgICAgKiBAcGFyYW0ga2V5IOOCreODvFxuICAgICAqIEBwYXJhbSB2YWx1ZSDjgq3jg7zjgYvjgonlj4LnhafjgZXjgozjgovopoHntKBcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihrZXk6IEssIHZhbHVlOiBWKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMua2V5ID0ga2V5O1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog44Kt44O844KS5Y+W5b6X44GZ44KLXG4gICAgICovXG4gICAgcHVibGljIGdldEtleSgpOiBLIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua2V5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOimgee0oOOCkuWPluW+l+OBmeOCi1xuICAgICAqL1xuICAgIHB1YmxpYyBnZXRWYWx1ZSgpOiBWIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog44Kt44O844Go6KaB57Sg44KS5Y+W5b6X44GZ44KLXG4gICAgICogQHJldHVybnMg44Kt44O844Go6KaB57SgXG4gICAgICovXG4gICAgcHVibGljIGdldEl0ZW0oKTogW0ssIFZdIHtcbiAgICAgICAgcmV0dXJuIFt0aGlzLmtleSwgdGhpcy52YWx1ZV07XG4gICAgfVxufVxuXG4vKipcbiAqIOODj+ODg+OCt+ODpeWApOOCkueUqOOBhOOBnyjjg4HjgqfjgqTjg7Pms5Xjga4p6L6e5pu444Gu5a6f6KOF44CC6aCG5bqP44Gv5L+d6Ki844GX44Gq44GEXG4gKiBqc+OBrui+nuabuOOCkueUqOOBhOOBpuiqpOmtlOWMluOBl+OBpuOBhOOBvuOBmVxuICovXG5leHBvcnQgY2xhc3MgSGFzaE1hcDxLIGV4dGVuZHMgSGFzaGFibGUsIFY+IGV4dGVuZHMgSGFzaGVkQ29sbGVjdGlvbjxLLCBWPiBpbXBsZW1lbnRzIEhhc2hhYmxlIHtcbiAgICBwcml2YXRlIGFNYXA6IE1hcDxudW1iZXIsIExpc3Q8RGljdGlvbmFyeUl0ZW08SywgVj4+PjtcblxuICAgIC8qKlxuICAgICAqIOi+nuabuOOCkuS9nOaIkOOBmeOCi1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKC4uLml0ZW1zOiBBcnJheTxbSywgVl0+KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuYU1hcCA9IG5ldyBNYXAoKTtcblxuICAgICAgICB0aGlzLmFkZEFsbCguLi5pdGVtcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog6L6e5pu444Gr44Kt44O844Go6KaB57Sg44Gu44Oa44Ki44KS6L+95Yqg44GZ44KLXG4gICAgICogQHBhcmFtIGl0ZW0g6L+95Yqg44GZ44KL44Kt44O844Go6KaB57Sg44Gu44Oa44KiXG4gICAgICogQHJldHVybiDjgZPjga7ovp7mm7hcbiAgICAgKi9cbiAgICBwdWJsaWMgYWRkKGl0ZW06IFtLLCBWXSk6IEhhc2hNYXA8SywgVj4ge1xuICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBpdGVtO1xuICAgICAgICBjb25zdCBoYXNoQ29kZSA9IGtleS5oYXNoKCk7XG4gICAgICAgIGlmICh0aGlzLmFNYXAuaGFzKGhhc2hDb2RlKSkge1xuICAgICAgICAgICAgdGhpcy5hTWFwLmdldChoYXNoQ29kZSk/LmFwcGVuZChuZXcgRGljdGlvbmFyeUl0ZW0oa2V5LCB2YWx1ZSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hTWFwLnNldChoYXNoQ29kZSwgbmV3IExpc3QobmV3IERpY3Rpb25hcnlJdGVtKGtleSwgdmFsdWUpKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50YWxseSArPSAxO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOi+nuabuOOBq+OBvuOBqOOCgeOBpui/veWKoOOBmeOCi1xuICAgICAqIEBwYXJhbSBpdGVtcyDov73liqDjgZnjgovjgq3jg7zjgajopoHntKDjga7jg5rjgqLnvqRcbiAgICAgKiBAcmV0dXJuIOOBk+OBrui+nuabuFxuICAgICAqL1xuICAgIHB1YmxpYyBhZGRBbGwoLi4uaXRlbXM6IEFycmF5PFtLLCBWXT4pOiBIYXNoTWFwPEssIFY+IHtcbiAgICAgICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hZGQoaXRlbSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOimgee0oOOCkuWJiumZpOOBmeOCi1xuICAgICAqL1xuICAgIHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5hTWFwLmNsZWFyKCk7XG4gICAgICAgIHRoaXMudGFsbHkgPSAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOWPl+OBkeWPluOBo+OBn+mWouaVsOOCkuOBk+OBrk1hcOOBruWFqOOBpuOBruOCreODvOOBqOimgee0oOOBruODmuOCouOBpzHlm57jgZrjgaTlrp/ooYzjgZnjgovjgILpoIbluo/jga/kv53oqLzjgZfjgarjgYRcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2tmbiDjgq3jg7zjgajopoHntKDjga7jg5rjgqLjgpLlj5fjgZHlj5bjgovplqLmlbBcbiAgICAgKi9cbiAgICBwdWJsaWMgZm9yRWFjaChjYWxsYmFja2ZuOiAodmFsdWU6IFYsIGtleTogSywgc2VsZjogSGFzaE1hcDxLLCBWPikgPT4gdm9pZCkge1xuICAgICAgICBjb25zdCBhbkl0ZXJhdG9yID0gdGhpcy5lbnRyaWVzKCk7XG4gICAgICAgIGxldCBhUHJvcGVydHkgPSBhbkl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgd2hpbGUgKGFQcm9wZXJ0eS5kb25lICE9PSB1bmRlZmluZWQgJiYgIWFQcm9wZXJ0eS5kb25lKSB7XG4gICAgICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBhUHJvcGVydHkudmFsdWU7XG4gICAgICAgICAgICBjYWxsYmFja2ZuKHZhbHVlLCBrZXksIHRoaXMpO1xuICAgICAgICAgICAgYVByb3BlcnR5ID0gYW5JdGVyYXRvci5uZXh0KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDjgZPjga7ovp7mm7jjga7lj43lvqnlj6/og73jgqrjg5bjgrjjgqfjgq/jg4jjgpLov5TjgZlcbiAgICAgKiBAcmV0dXJucyDjgZPjga7ovp7mm7jjga7lj43lvqnlj6/og73jgqrjg5bjgrjjgqfjgq/jg4hcbiAgICAgKi9cbiAgICBwdWJsaWMgZW50cmllcygpOiBJdGVyYWJsZUl0ZXJhdG9yPFtLLCBWXT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5tYWtlSXRlcmF0b3I8W0ssIFZdPigoa2V5LCB2YWx1ZSkgPT4gW2tleSwgdmFsdWVdKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDjgqrjg5bjgrjjgqfjgq/jg4jjgYzlkIzlgKTjgYvjganjgYbjgYvjgIJPKE5eMinjgarjga7jgafms6jmhI9cbiAgICAgKiBAcGFyYW0gb3RoZXIg5Yik5a6a44GZ44KL44Kq44OW44K444Kn44Kv44OIXG4gICAgICogQHJldHVybnMg5ZCM44GY44Gq44KJdHJ1ZSzjgZ3jgozku6XlpJbjga9mYWxzZVxuICAgICAqL1xuICAgIHB1YmxpYyBlcXVhbHMob3RoZXI6IHVua25vd24pOiBib29sZWFuIHtcbiAgICAgICAgaWYgKG90aGVyID09PSBudWxsIHx8IG90aGVyID09PSB1bmRlZmluZWQpIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKCEob3RoZXIgaW5zdGFuY2VvZiBIYXNoTWFwKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5zaXplKCkgIT09IG90aGVyLnNpemUoKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAob3RoZXIuaGFzaCgpICE9PSB0aGlzLmhhc2goKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiB0aGlzLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0VmFsdWUgPSBvdGhlci5nZXQoa2V5KTtcbiAgICAgICAgICAgIGlmICh0YXJnZXRWYWx1ZSA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgLy8g5q+U6LyD5a++6LGh44GMSGFzaGFibGXjgYvjganjgYbjgYtcbiAgICAgICAgICAgIGlmICgodmFsdWUgYXMgdW5rbm93biBhcyBIYXNoYWJsZSkuZXF1YWxzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoKHZhbHVlIGFzIHVua25vd24gYXMgSGFzaGFibGUpLmVxdWFscyh0YXJnZXRWYWx1ZSkgPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdGFyZ2V0VmFsdWUpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOaMh+WumuOBl+OBn+OCreODvOOBqOOBneOBruWwhOWDj+OBqOOBquOCi+imgee0oOOCkuWJiumZpOOBmeOCi1xuICAgICAqIEBwYXJhbSBrZXkg5YmK6Zmk44GZ44KL44Kt44O8XG4gICAgICogQHJldHVybnMg5YmK6Zmk44GX44Gf6KaB57Sg44CC5a2Y5Zyo44GX44Gq44GE5aC05ZCI44GvbnVsbFxuICAgICAqL1xuICAgIHB1YmxpYyBkZWxldGUoa2V5OiBLKTogViB8IG51bGwge1xuICAgICAgICBjb25zdCBhRGljdGlvbmFyeUl0ZW0gPSB0aGlzLnNlYXJjaChrZXkpO1xuICAgICAgICBpZiAoYURpY3Rpb25hcnlJdGVtICE9IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IGFMaXN0ID0gYURpY3Rpb25hcnlJdGVtLmxpc3Q7XG4gICAgICAgICAgICBhRGljdGlvbmFyeUl0ZW0uZGV0YWNoKCk7XG4gICAgICAgICAgICB0aGlzLnRhbGx5IC09IDE7XG4gICAgICAgICAgICBpZiAoYUxpc3Quc2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYU1hcC5kZWxldGUoa2V5Lmhhc2goKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYURpY3Rpb25hcnlJdGVtLmdldFZhbHVlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5oyH5a6a44GX44Gf44Kt44O844Gr5a++5b+c44GZ44KL6KaB57Sg44KS5Y+W5b6X44GZ44KLXG4gICAgICog5a2Y5Zyo44GX44Gq44GE44Gq44KJbnVsbFxuICAgICAqIEBwYXJhbSBrZXkg44Kt44O8XG4gICAgICovXG4gICAgcHVibGljIGdldChrZXk6IEspOiBWIHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLnNlYXJjaChrZXkpO1xuICAgICAgICByZXR1cm4gaXRlbSAhPT0gbnVsbCA/IGl0ZW0uZ2V0VmFsdWUoKSA6IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5oyH5a6a44GX44Gf44Kt44O844GM5a2Y5Zyo44GZ44KL44GLXG4gICAgICogQHBhcmFtIGtleSDmpJzntKLjgZnjgovjgq3jg7xcbiAgICAgKiBAcmV0dXJucyDlrZjlnKjjgZnjgovjgarjgol0cnVlLOOBneOCjOS7peWkluOBr2ZhbHNlXG4gICAgICovXG4gICAgcHVibGljIGhhcyhrZXk6IEspOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VhcmNoKGtleSkgIT09IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog44GT44Gu6L6e5pu444Gu44OP44OD44K344Ol5YCk44KS6L+U44GZXG4gICAgICogQHJldHVybnMg44GT44Gu6L6e5pu444Gu44OP44OD44K344Ol5YCkXG4gICAgICovXG4gICAgcHVibGljIGhhc2goKTogbnVtYmVyIHtcbiAgICAgICAgaWYgKHRoaXMudGFsbHkgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuYU1hcC5rZXlzKCkpLnJlZHVjZShcbiAgICAgICAgICAgIChwcmV2aW91c051bWJlciwgY3VycmVudE51bWJlcikgPT5cbiAgICAgICAgICAgICAgICAocHJldmlvdXNOdW1iZXIgKyBjdXJyZW50TnVtYmVyKSAlIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog44GT44Gu6L6e5pu444Gu44Kt44O844GM5ZCr44G+44KM44Gm44GE44KL5Y+N5b6p5Y+v6IO944Kq44OW44K444Kn44Kv44OI44KS6L+U44GZXG4gICAgICogQHJldHVybnMg44GT44Gu6L6e5pu444Gu44Kt44O844GM5ZCr44G+44KM44Gm44GE44KL5Y+N5b6p5Y+v6IO944Kq44OW44K444Kn44Kv44OIXG4gICAgICovXG4gICAgcHVibGljIGtleXMoKTogSXRlcmFibGVJdGVyYXRvcjxLPiB7XG4gICAgICAgIHJldHVybiB0aGlzLm1ha2VJdGVyYXRvcjxLPigoa2V5KSA9PiBrZXkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOOBk+OBruOCquODluOCuOOCp+OCr+ODiOOBruWPjeW+qeWPr+iDveOCquODluOCuOOCp+OCr+ODiOOCkuS9nOaIkOOBmeOCi1xuICAgICAqIEBwYXJhbSBmaWx0ZXIg5Y+N5b6p5Y+v6IO944Kq44OW44K444Kn44Kv44OI44Gr5ZCr44KB44KL6KaB57Sg44KS6YG45oqe44GZ44KL6Zai5pWwXG4gICAgICogQHJldHVybiDlj43lvqnlj6/og73jgqrjg5bjgrjjgqfjgq/jg4hcbiAgICAgKi9cbiAgICBwcml2YXRlIG1ha2VJdGVyYXRvcjxUPihmaWx0ZXI6IChrZXk6IEssIHZhbHVlOiBWKSA9PiBUKTogSXRlcmFibGVJdGVyYXRvcjxUPiB7XG4gICAgICAgIGNvbnN0IGFuSXRlcmF0b3IgPSB0aGlzLmFNYXAudmFsdWVzKCk7XG4gICAgICAgIHJldHVybiAoZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGxldCBhUHJvcGVydHkgPSBhbkl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgICAgIHdoaWxlIChhUHJvcGVydHkuZG9uZSAhPT0gdW5kZWZpbmVkICYmICFhUHJvcGVydHkuZG9uZSkge1xuICAgICAgICAgICAgICAgIGxldCBhbkl0ZW0gPSBhUHJvcGVydHkudmFsdWUuaGVhZDtcbiAgICAgICAgICAgICAgICB3aGlsZSAoYW5JdGVtICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IGFuSXRlbS5nZXRJdGVtKCk7XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIGZpbHRlcihrZXksIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgYW5JdGVtID0gYW5JdGVtLm5leHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFQcm9wZXJ0eSA9IGFuSXRlcmF0b3IubmV4dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOaMh+WumuOBl+OBn+OCreODvOOBi+OCieOCreODvOOBqOODkOODquODpeODvOOBruODmuOCouOCkuWPluW+l+OBmeOCi1xuICAgICAqIEBwYXJhbSBrZXkg5qSc57Si44Gr5L2/55So44GZ44KL44Kt44O8XG4gICAgICogQHJldHVybnMg5a2Y5Zyo44GZ44KL44Gq44KJ44Kq44OW44K444Kn44Kv44OI44GM5YWl44Gj44Gm44GE44KLRGljdGlvbmFyeUl0ZW0s44Gd44KM5Lul5aSW44GvbnVsbFxuICAgICAqL1xuICAgIHByaXZhdGUgc2VhcmNoKGtleTogSyk6IERpY3Rpb25hcnlJdGVtPEssIFY+IHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IGhhc2hDb2RlID0ga2V5Lmhhc2goKTtcbiAgICAgICAgaWYgKHRoaXMuYU1hcC5oYXMoaGFzaENvZGUpKSB7XG4gICAgICAgICAgICBsZXQgZWxlbWVudCA9IHRoaXMuYU1hcC5nZXQoaGFzaENvZGUpPy5oZWFkO1xuICAgICAgICAgICAgd2hpbGUgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAvLyDlrZjlnKjjgZfjgZ/jgarjgonjgbBcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRLZXkgPSBlbGVtZW50LmdldEtleSgpO1xuICAgICAgICAgICAgICAgIGlmIChrZXkuZXF1YWxzKHRhcmdldEtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50Lm5leHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog44GT44Gu6L6e5pu444Gr44Kt44O844Go44Gd44Gu6KaB57Sg44KS6L+95Yqg44GZ44KLXG4gICAgICogQHBhcmFtIGtleSDjgq3jg7xcbiAgICAgKiBAcGFyYW0gdmFsdWUg6KaB57SgXG4gICAgICogQHJldHVybiDjgZPjga7ovp7mm7hcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0KGtleTogSywgdmFsdWU6IFYpOiBIYXNoTWFwPEssIFY+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkKFtrZXksIHZhbHVlXSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5LiO44GI44KJ44KM44Gf44Kt44O844Gr5a++44GX44Gm6KaB57Sg44GM5a2Y5Zyo44GX44Gq44GE44Gq44KJ44Gw6KaB57Sg44KS6L+95Yqg44GZ44KL44CCXG4gICAgICog44GZ44Gn44Gr44Kt44O844Gr5a++5b+c44GX44Gf6KaB57Sg44GM5a2Y5Zyo44GZ44KL44Gq44KJ44Gw6L+95Yqg44GX44Gq44GEXG4gICAgICogQHBhcmFtIGtleSDov73liqDjgZnjgovjgq3jg7xcbiAgICAgKiBAcGFyYW0gdmFsdWUg6L+95Yqg44GZ44KL6KaB57SgXG4gICAgICogQHJldHVybnMg6L+95Yqg44GX44Gf44Gq44KJ44Gw44Gd44Gu6KaB57Sg44CB44Gd44KM5Lul5aSW44GvbnVsbFxuICAgICAqL1xuICAgIHB1YmxpYyBzZXREZWZhdWx0KGtleTogSywgdmFsdWU6IFYpOiBWIHwgbnVsbCB7XG4gICAgICAgIGlmICh0aGlzLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldChrZXksIHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOOBk+OBrui+nuabuOOBruWkp+OBjeOBleOCkk8oMSnjgafov5TjgZlcbiAgICAgKiBAcmV0dXJucyDjgZPjga7ovp7mm7jjga7lpKfjgY3jgZVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2l6ZSgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy50YWxseTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDjgZPjga7ovp7mm7jjga7opoHntKDjgYzlkKvjgb7jgozjgabjgYTjgovlj43lvqnlj6/og73jgqrjg5bjgrjjgqfjgq/jg4jjgpLov5TjgZlcbiAgICAgKiBAcmV0dXJucyDjgZPjga7ovp7mm7jjga7opoHntKDjgYzlkKvjgb7jgozjgabjgYTjgovlj43lvqnlj6/og73jgqrjg5bjgrjjgqfjgq/jg4hcbiAgICAgKi9cbiAgICBwdWJsaWMgdmFsdWVzKCk6IEl0ZXJhYmxlSXRlcmF0b3I8Vj4ge1xuICAgICAgICByZXR1cm4gdGhpcy5tYWtlSXRlcmF0b3I8Vj4oKF8sIHZhbHVlKSA9PiB2YWx1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog6L6e5pu444KS44Oq44K544OI44G45aSJ5o+b44GZ44KLXG4gICAgICogQHJldHVybnMg6L6e5pu444Gu44Oq44K544OIXG4gICAgICovXG4gICAgcHVibGljIHRvQXJyYXkoKTogQXJyYXk8W0ssIFZdPiB7XG4gICAgICAgIGNvbnN0IGFuQXJyYXkgPSBuZXcgQXJyYXk8W0ssIFZdPigpO1xuICAgICAgICBpZiAodGhpcy50YWxseSA9PT0gMCkgYW5BcnJheTtcblxuICAgICAgICAvLyDpgJ/luqblkJHkuIrjga7jgZ/jgoFtYXDjgpLnlKjjgYTjgZ/mm7jjgY3mlrnjga/lu4PmraJcbiAgICAgICAgQXJyYXkuZnJvbSh0aGlzLmFNYXAudmFsdWVzKCkpLmZvckVhY2goKGFMaW5rZWRMaXN0KSA9PiB7XG4gICAgICAgICAgICBsZXQgaXRlbSA9IGFMaW5rZWRMaXN0LmhlYWQ7XG4gICAgICAgICAgICB3aGlsZSAoaXRlbSkge1xuICAgICAgICAgICAgICAgIGFuQXJyYXkucHVzaChpdGVtLmdldEl0ZW0oKSk7XG4gICAgICAgICAgICAgICAgaXRlbSA9IGl0ZW0ubmV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBhbkFycmF5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOOBk+OBruOCquODluOCuOOCp+OCr+ODiOOCkuaWh+Wtl+WIl+OBuOWkieaPm+OBmeOCi1xuICAgICAqL1xuICAgIHB1YmxpYyB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBpdGVtU3RyaW5nID0gdGhpcy50b0FycmF5KClcbiAgICAgICAgICAgIC5tYXAoKFtrZXksIHZhbHVlXSkgPT4gYCR7U3RyaW5nKGtleSl9ID0+ICR7U3RyaW5nKHZhbHVlKX1gKVxuICAgICAgICAgICAgLmpvaW4oXCIsIFwiKTtcbiAgICAgICAgcmV0dXJuIGBIYXNoTWFwKCR7dGhpcy5zaXplKCl9KSB7ICR7aXRlbVN0cmluZ30gfWA7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgSGFzaGFibGUgfSBmcm9tIFwiLi9IYXNoYWJsZVwiO1xuaW1wb3J0IHsgSGFzaGVkQ29sbGVjdGlvbiB9IGZyb20gXCIuL0hhc2hlZENvbGxlY3Rpb25cIjtcbmltcG9ydCB7IEhhc2hNYXAgfSBmcm9tIFwiLi9IYXNoTWFwXCI7XG5cbi8qKlxuICog44OP44OD44K344Ol5YCk44KS55So44GE44GfKOODgeOCp+OCpOODs+azleOBrinpm4blkIjjga7lrp/oo4XjgILpoIbluo/jga/kv53oqLzjgZfjgarjgYRcbiAqIEhhc2hNYXDjgpLkvb/nlKjjgZfjgabjgYTjgb7jgZnjgIJcbiAqL1xuZXhwb3J0IGNsYXNzIEhhc2hTZXQ8VCBleHRlbmRzIEhhc2hhYmxlPiBleHRlbmRzIEhhc2hlZENvbGxlY3Rpb248VCwgVD4gaW1wbGVtZW50cyBIYXNoYWJsZSB7XG4gICAgcHJpdmF0ZSBhTWFwOiBIYXNoTWFwPFQsIFQ+O1xuXG4gICAgLyoqXG4gICAgICog6ZuG5ZCI44KS5L2c5oiQ44GZ44KLXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoLi4ub2JqZWN0czogQXJyYXk8VD4pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5hTWFwID0gbmV3IEhhc2hNYXAoKTtcblxuICAgICAgICB0aGlzLmFkZEFsbCguLi5vYmplY3RzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDpm4blkIjjgavov73liqDjgZnjgotcbiAgICAgKiBAcGFyYW0gYW5PYmplY3Qg6L+95Yqg44GZ44KL44Kq44OW44K444Kn44Kv44OIXG4gICAgICovXG4gICAgcHVibGljIGFkZChhbk9iamVjdDogVCk6IEhhc2hTZXQ8VD4ge1xuICAgICAgICBpZiAoIXRoaXMuaGFzKGFuT2JqZWN0KSkge1xuICAgICAgICAgICAgdGhpcy5hTWFwLnNldChhbk9iamVjdCwgYW5PYmplY3QpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog6ZuG5ZCI44Gr6L+95Yqg44GZ44KLXG4gICAgICogQHBhcmFtIG9iamVjdHMg6L+95Yqg44GZ44KL44Kq44OW44K444Kn44Kv44OI576kXG4gICAgICovXG4gICAgcHVibGljIGFkZEFsbCguLi5vYmplY3RzOiBBcnJheTxUPik6IEhhc2hTZXQ8VD4ge1xuICAgICAgICBvYmplY3RzLmZvckVhY2goKGFuT2JqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFkZChhbk9iamVjdCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOWFqOOBpuOBruimgee0oOOCkuWJiumZpOOBmeOCi1xuICAgICAqL1xuICAgIHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5hTWFwLmNsZWFyKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5oyH5a6a44GX44Gf44Kq44OW44K444Kn44Kv44OI44KS5YmK6Zmk44GZ44KLXG4gICAgICogQHBhcmFtIGFuT2JqZWN0IOWJiumZpOOBmeOCi+OCquODluOCuOOCp+OCr+ODiFxuICAgICAqIEByZXR1cm5zIOWJiumZpOOBl+OBn+OCqOODrOODoeODs+ODiOOCguOBl+OBj+OBr251bGxcbiAgICAgKi9cbiAgICBwdWJsaWMgZGVsZXRlKGFuT2JqZWN0OiBUKTogVCB8IG51bGwge1xuICAgICAgICByZXR1cm4gdGhpcy5hTWFwLmRlbGV0ZShhbk9iamVjdCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog44GT44Gu6L6e5pu444Gu5Y+N5b6p5Y+v6IO944Kq44OW44K444Kn44Kv44OI44KS6L+U44GZXG4gICAgICogQHJldHVybnMg44GT44Gu6L6e5pu444Gu5Y+N5b6p5Y+v6IO944Kq44OW44K444Kn44Kv44OIXG4gICAgICovXG4gICAgcHVibGljIGVudHJpZXMoKTogSXRlcmFibGVJdGVyYXRvcjxbVCwgVF0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYU1hcC5lbnRyaWVzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog44Kq44OW44K444Kn44Kv44OI44GM5ZCM5YCk44GL44Gp44GG44GLXG4gICAgICogQHBhcmFtIG90aGVyIOWIpOWumuOBmeOCi+OCquODluOCuOOCp+OCr+ODiFxuICAgICAqIEByZXR1cm5zIOWQjOOBmOOBquOCiXRydWUs44Gd44KM5Lul5aSW44GvZmFsc2VcbiAgICAgKi9cbiAgICBwdWJsaWMgZXF1YWxzKG90aGVyOiB1bmtub3duKSB7XG4gICAgICAgIGlmIChvdGhlciA9PT0gbnVsbCB8fCBvdGhlciA9PT0gdW5kZWZpbmVkKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICghKG90aGVyIGluc3RhbmNlb2YgSGFzaFNldCkpIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuc2l6ZSgpICE9PSBvdGhlci5zaXplKCkpIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKG90aGVyLmhhc2goKSAhPT0gdGhpcy5oYXNoKCkpIHJldHVybiBmYWxzZTtcbiAgICAgICAgZm9yIChjb25zdCBhbk9iamVjdCBvZiB0aGlzLnZhbHVlcygpKSB7XG4gICAgICAgICAgICBpZiAoIW90aGVyLmhhcyhhbk9iamVjdCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDlj5fjgZHlj5bjgaPjgZ/plqLmlbDjgpLjgZPjga5TZXTjga7lhajjgabjga7opoHntKDjgacx5Zue44Ga44Gk5a6f6KGM44GZ44KL44CC6aCG5bqP44Gv5L+d6Ki844GX44Gq44GEXG4gICAgICogQHBhcmFtIGNhbGxiYWNrZm4g6KaB57Sg44KS5Y+X44GR5Y+W44KL6Zai5pWwXG4gICAgICovXG4gICAgcHVibGljIGZvckVhY2goY2FsbGJhY2tmbjogKHZhbHVlOiBULCB2YWx1ZTI6IFQsIHNlbGY6IEhhc2hTZXQ8VD4pID0+IHZvaWQpIHtcbiAgICAgICAgY29uc3QgYW5JdGVyYXRvciA9IHRoaXMuZW50cmllcygpO1xuICAgICAgICBsZXQgYVByb3BlcnR5ID0gYW5JdGVyYXRvci5uZXh0KCk7XG4gICAgICAgIHdoaWxlIChhUHJvcGVydHkuZG9uZSAhPT0gdW5kZWZpbmVkICYmICFhUHJvcGVydHkuZG9uZSkge1xuICAgICAgICAgICAgY29uc3QgW3ZhbHVlLCB2YWx1ZTJdID0gYVByb3BlcnR5LnZhbHVlO1xuICAgICAgICAgICAgY2FsbGJhY2tmbih2YWx1ZSwgdmFsdWUyLCB0aGlzKTtcbiAgICAgICAgICAgIGFQcm9wZXJ0eSA9IGFuSXRlcmF0b3IubmV4dCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5oyH5a6a44GX44Gf44Kq44OW44K444Kn44Kv44OI44GM5a2Y5Zyo44GZ44KL44GLXG4gICAgICogQHBhcmFtIGFuT2JqZWN0IOaknOe0ouOBmeOCi+OCquODluOCuOOCp+OCr+ODiFxuICAgICAqIEByZXR1cm5zIOWtmOWcqOOBmeOCi+OBquOCiXRydWUs44Gd44KM5Lul5aSW44GvZmFsc2VcbiAgICAgKi9cbiAgICBwdWJsaWMgaGFzKGFuT2JqZWN0OiBUKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmFNYXAuaGFzKGFuT2JqZWN0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDjgZPjga7pm4blkIjjga7jg4/jg4Pjgrfjg6XlgKTjgpLov5TjgZlcbiAgICAgKiBAcmV0dXJucyDjgZPjga7pm4blkIjjga7jg4/jg4Pjgrfjg6XlgKRcbiAgICAgKi9cbiAgICBwdWJsaWMgaGFzaCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5hTWFwLmhhc2goKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDjgZPjga7ovp7mm7jjga7jgq3jg7zjgYzlkKvjgb7jgozjgabjgYTjgovlj43lvqnlj6/og73jgqrjg5bjgrjjgqfjgq/jg4jjgpLov5TjgZlcbiAgICAgKiBAcmV0dXJucyDjgZPjga7ovp7mm7jjga7jgq3jg7zjgYzlkKvjgb7jgozjgabjgYTjgovlj43lvqnlj6/og73jgqrjg5bjgrjjgqfjgq/jg4hcbiAgICAgKi9cbiAgICBwdWJsaWMga2V5cygpOiBJdGVyYWJsZUl0ZXJhdG9yPFQ+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYU1hcC5rZXlzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog44GT44Gu6ZuG5ZCI44Gu5aSn44GN44GV44KSTygxKeOBp+i/lOOBmVxuICAgICAqIEByZXR1cm5zIOOBk+OBrumbhuWQiOOBruWkp+OBjeOBlVxuICAgICAqL1xuICAgIHB1YmxpYyBzaXplKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmFNYXAuc2l6ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOOBk+OBrui+nuabuOOBruimgee0oOOBjOWQq+OBvuOCjOOBpuOBhOOCi+WPjeW+qeWPr+iDveOCquODluOCuOOCp+OCr+ODiOOCkui/lOOBmVxuICAgICAqIEByZXR1cm5zIOOBk+OBrui+nuabuOOBruimgee0oOOBjOWQq+OBvuOCjOOBpuOBhOOCi+WPjeW+qeWPr+iDveOCquODluOCuOOCp+OCr+ODiFxuICAgICAqL1xuICAgIHB1YmxpYyB2YWx1ZXMoKTogSXRlcmFibGVJdGVyYXRvcjxUPiB7XG4gICAgICAgIHJldHVybiB0aGlzLmtleXMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDpm4blkIjjgpLjg6rjgrnjg4jjgbjlpInmj5vjgZnjgotcbiAgICAgKiBAcmV0dXJucyDpm4blkIjjga7jg6rjgrnjg4hcbiAgICAgKi9cbiAgICBwdWJsaWMgdG9BcnJheSgpOiBBcnJheTxUPiB7XG4gICAgICAgIHJldHVybiB0aGlzLmFNYXAudG9BcnJheSgpLm1hcCgoaXRlbSkgPT4gaXRlbVswXSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog44GT44Gu44Kq44OW44K444Kn44Kv44OI44KS5paH5a2X5YiX44G45aSJ5o+b44GZ44KLXG4gICAgICovXG4gICAgcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IGl0ZW1TdHJpbmcgPSB0aGlzLnRvQXJyYXkoKVxuICAgICAgICAgICAgLm1hcCgodmFsdWUpID0+IFN0cmluZyh2YWx1ZSkpXG4gICAgICAgICAgICAuam9pbihcIiwgXCIpO1xuICAgICAgICByZXR1cm4gYEhhc2hTZXQoJHt0aGlzLnNpemUoKX0pIHsgJHtpdGVtU3RyaW5nfSB9YDtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwic2VsZiIsInRoaXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsIkl0ZXJhdG9yIiwiY29uc3RydWN0b3IiLCJpdGVtIiwibmV4dCIsImRvbmUiLCJ1bmRlZmluZWQiLCJJdGVtIiwicHJlcGVuZCIsImxpc3QiLCJhcHBlbmQiLCJkZXRhY2giLCJFcnJvciIsInByZXYiLCJoZWFkIiwidGFpbCIsInNpemUiLCJMaXN0Iiwic3RhdGljIiwiaXRlbXMiLCJhcHBlbmRBbGwiLCJ0b0FycmF5IiwicmVzdWx0IiwicHVzaCIsIml0ZXJhdG9yIiwiaW5kZXgiLCJsZW5ndGgiLCJIYXNoZWRDb2xsZWN0aW9uIiwidGFsbHkiLCJzdXBlciIsIkRpY3Rpb25hcnlJdGVtIiwiZ2V0S2V5IiwiZ2V0VmFsdWUiLCJnZXRJdGVtIiwiSGFzaE1hcCIsImFNYXAiLCJNYXAiLCJhZGRBbGwiLCJhZGQiLCJoYXNoQ29kZSIsImhhc2giLCJoYXMiLCJzZXQiLCJmb3JFYWNoIiwiY2xlYXIiLCJjYWxsYmFja2ZuIiwiYW5JdGVyYXRvciIsImVudHJpZXMiLCJhUHJvcGVydHkiLCJtYWtlSXRlcmF0b3IiLCJlcXVhbHMiLCJvdGhlciIsInRhcmdldFZhbHVlIiwiZGVsZXRlIiwiYURpY3Rpb25hcnlJdGVtIiwic2VhcmNoIiwiYUxpc3QiLCJBcnJheSIsImZyb20iLCJrZXlzIiwicmVkdWNlIiwicHJldmlvdXNOdW1iZXIiLCJjdXJyZW50TnVtYmVyIiwiTnVtYmVyIiwiTUFYX1NBRkVfSU5URUdFUiIsImZpbHRlciIsInZhbHVlcyIsImFuSXRlbSIsImVsZW1lbnQiLCJ0YXJnZXRLZXkiLCJzZXREZWZhdWx0IiwiXyIsImFuQXJyYXkiLCJhTGlua2VkTGlzdCIsInRvU3RyaW5nIiwiaXRlbVN0cmluZyIsIm1hcCIsIlN0cmluZyIsImpvaW4iLCJIYXNoU2V0Iiwib2JqZWN0cyIsImFuT2JqZWN0IiwidmFsdWUyIl0sInNvdXJjZVJvb3QiOiIifQ==