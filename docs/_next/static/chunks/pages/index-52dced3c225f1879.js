(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7314:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(8841)}])},8841:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return rr}});var n=r(2322),o=r(7729),i=r.n(o),a=r(2784),s=r(3476);class l extends Object{static getID(){for(;;){let e=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString();if(!l.idSet.has(e))return l.idSet.add(e),e}}static release(e){return l.idSet.delete(e)}}l.idSet=new Set;class c extends Object{get x(){return this._x}get y(){return this._y}add(e){return new c(this.x+e.x,this.y+e.y)}copy(){return new c(this.x,this.y)}div(e){return"number"==typeof e?new c(this.x/e,this.y/e):new c(this.x/e.x,this.y/e.y)}equals(e){return null!=e&&e instanceof c&&this.x===e.x&&this.y===e.y}static fromJson(e){return new c(e.x,e.y)}sub(e){return new c(this.x-e.x,this.y-e.y)}mul(e){return"number"==typeof e?new c(this.x*e,this.y*e):new c(this.x*e.x,this.y*e.y)}toJSON(){return{x:this.x,y:this.y}}constructor(e=0,t=0){super(),this._x=0,this._y=0,this._x=e,this._y=t}}let u={diagrams:"diagrams",elements:"elements",directions:"directions"};var f=r(7895);let p={Node:"Node",Leaf:"Leaf",Start:"Start",End:"End"},d=(0,s.cn)({key:"DiagramIdsAtom",default:new Set}),h=(0,s.xu)({key:"CreateDirectionModeAtom",default:!1}),y=(0,s.xu)({key:"DiagramNameAtom",default:""}),m=(0,s.xu)({key:"OffsetAtom",default:new c(0,0)}),g=(0,s.CG)({key:"DiagramSelectorFamily",get:e=>t=>{let{get:r}=t;return{id:e,createDirectionMode:r(h(e)),name:r(y(e)),offset:r(m(e))}},set:e=>(t,r)=>{let{get:n,set:o,reset:i}=t,a=n(g(e));if(r instanceof s.nY){n(ea(e)).map(e=>{i(K(e))}),i(h(e)),i(y(e)),i(m(e)),o(d,t=>(t.delete(e),new Set(t)));return}o(h(e),r.createDirectionMode),a.name!==r.name&&o(y(e),r.name),a.offset!=r.offset&&o(m(e),r.offset),o(d,t=>t.has(e)?t:(t.add(e),new Set(t)))}}),b=(0,s.nZ)({key:"GetAllDiagramIdsSelector",get:e=>{let{get:t}=e;return Array.from(t(d))}}),x=(0,s.nZ)({key:"GetAllDiagramStateSelector",get:e=>{let{get:t}=e;return t(b).map(e=>t(g(e)))}}),v=(0,s.CG)({key:"DiagramNameSelectorFamily",get:e=>t=>{let{get:r}=t;return r(y(e))},set:e=>(t,r)=>{let{set:n}=t;n(y(e),r)}}),S=(0,s.CG)({key:"OffsetSelectorFamily",get:e=>t=>{let{get:r}=t;return r(m(e))},set:e=>(t,r)=>{let{set:n}=t;return n(m(e),r)}}),w=(0,s.CG)({key:"CreateDirectionModeSelectorFamily",get:e=>t=>{let{get:r}=t;return r(h(e))},set:e=>(t,r)=>{let{set:n}=t;return n(h(e),r)}}),E=()=>(0,s._8)(e=>{let{set:t}=e;return(e,r)=>(t(g(e),{id:e,createDirectionMode:!1,offset:new c(0,0),name:r}),e)},[]),j=()=>(0,s._8)(e=>{let{snapshot:t,set:r,reset:n}=e;return async e=>{n(g(e));let o=await t.getPromise(b),i=o.filter(t=>t!==e).pop();r(ep,t=>t!==e?t:null!=i?i:"")}},[]),A=()=>(0,s._8)(e=>{let{set:t}=e;return(e,r)=>{t(v(e),r)}},[]),O=(0,s.cn)({key:"DirectionIdsAtom",default:new Set}),P=(0,s.xu)({key:"DirectionAtomFamily",default:{id:"",fromId:"",toId:""}}),k=(0,s.CG)({key:"DirectionsSelector",get:e=>t=>{let{get:r}=t,n=r(P(e));return n},set:e=>(t,r)=>{let{set:n,reset:o}=t;if(r instanceof s.nY){o(P(e)),n(O,t=>(t.delete(e),new Set(t)));return}n(P(e),r),n(O,t=>t.has(e)?t:(t.add(e),new Set(t)))}}),C=(0,s.nZ)({key:"DirectionIdsSelector",get:e=>{let{get:t}=e;return Array.from(t(O))}}),I=(0,s.nZ)({key:"GetAllDirectionStateSelector",get:e=>{let{get:t}=e;return t(C).map(e=>t(k(e)))}}),T=(0,s.CG)({key:"GetDirectionIdsFromDiagramId",get:e=>t=>{let{get:r}=t,n=new Set(r(ea(e)));return r(I).flatMap(e=>n.has(e.fromId)||n.has(e.toId)?e.id:[])}}),N=(0,s.CG)({key:"GetDirectionIdsFromElementId",get:e=>t=>{let{get:r}=t;return r(I).flatMap(t=>e===t.fromId||e===t.toId?[t.id]:[])}}),R=()=>(0,s._8)(e=>{let{set:t}=e;return(e,r,n)=>{t(k(e),{id:e,fromId:r,toId:n})}},[]),D=()=>(0,s._8)(e=>{let{reset:t}=e;return e=>{t(k(e))}},[]),M=(0,s.cn)({key:"ElementThemeAtom",default:{startAndEndNodeColor:"#000000",elementStrokeColor:"#000000",elementFillColor:"#FFF6D1",directionLight:"#00ccff",directionDark:"#0098cb",elementSize:14}}),F=(0,s.xu)({key:"ElementNameAtomFamily",default:""}),_=(0,s.CG)({key:"ElementNameSelectorFamily",get:e=>t=>{let{get:r}=t;return r(F(e))},set:e=>(t,r)=>{let{set:n}=t;n(F(e),r)}}),B=()=>(0,s._8)(e=>{let{set:t}=e;return function(e,r,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new c(0,0),i=!(arguments.length>4)||void 0===arguments[4]||arguments[4],a=!(arguments.length>5)||void 0===arguments[5]||arguments[5],s=!(arguments.length>6)||void 0===arguments[6]||arguments[6],l=!(arguments.length>7)||void 0===arguments[7]||arguments[7];return t(K(e),{id:e,diagramId:r,kind:p.Leaf,position:o,canDelete:i,canDirectionEnter:a,canDirectionLeave:s,canDuplicate:l}),t(_(e),n),e}},[]),Z=()=>(0,s._8)(e=>{let{set:t}=e;return function(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new c(0,0);return t(K(e),{id:e,diagramId:r,kind:p.Start,position:n,canDelete:!1,canDirectionEnter:!1,canDirectionLeave:!0,canDuplicate:!1}),t(_(e),""),e}},[]),q=()=>(0,s._8)(e=>{let{set:t}=e;return function(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new c(0,0);return t(K(e),{id:e,diagramId:r,kind:p.End,position:n,canDelete:!1,canDirectionEnter:!0,canDirectionLeave:!1,canDuplicate:!1}),t(_(e),""),e}},[]),U=(0,s.xu)({key:"BindDiagramIdAtomFamily",default:""}),G=(0,s.CG)({key:"BindDiagramIdSelectorFamily",get:e=>t=>{let{get:r}=t;return r(U(e))},set:e=>(t,r)=>{let{set:n}=t;n(U(e),r)}}),L=()=>(0,s._8)(e=>{let{set:t}=e;return function(e,r,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new c(0,0),i=!(arguments.length>4)||void 0===arguments[4]||arguments[4],a=!(arguments.length>5)||void 0===arguments[5]||arguments[5],s=!(arguments.length>6)||void 0===arguments[6]||arguments[6],l=!(arguments.length>7)||void 0===arguments[7]||arguments[7];return t(K(e),{id:e,diagramId:r,kind:p.Node,position:o,canDelete:i,canDirectionEnter:a,canDirectionLeave:s,canDuplicate:l}),t(U(e),n),e}},[]),z=(0,s.cn)({key:"ElementIdsAtom",default:new Set}),J=(0,s.xu)({key:"DiagramIdBelongElementAtomFamily",default:""}),$=(0,s.xu)({key:"ElementPositionAtomFamily",default:new c(0,0)}),W=(0,s.xu)({key:"ElementKindAtomFamily",default:p.Leaf}),V=(0,s.xu)({key:"ElementCanDeleteAtomFamily",default:!0}),H=(0,s.xu)({key:"ElementCanDirectionEnterAtomFamily",default:!0}),Y=(0,s.xu)({key:"ElementCanDirectionLeaveAtomFamily",default:!0}),X=(0,s.xu)({key:"ElementCanDuplicateAtomFamily",default:!0}),Q={diagramId:J,position:$,kind:W,canDelete:V,canDirectionEnter:H,canDirectionLeave:Y,canDuplicate:X,bindDiagramId:G,name:_},K=(0,s.CG)({key:"ElementsSelector",get:e=>t=>{let{get:r}=t,n={id:e,diagramId:r(J(e)),position:r($(e)),kind:r(W(e)),canDelete:r(V(e)),canDirectionEnter:r(H(e)),canDirectionLeave:r(Y(e)),canDuplicate:r(X(e))};return n.kind===p.Node?{...n,bindDiagramId:r(G(e))}:{...n,name:r(_(e))}},set:e=>(t,r)=>{let{get:n,set:o,reset:i}=t;if(r instanceof s.nY){let t=n(I).flatMap(t=>e===t.fromId||e===t.toId?[t.id]:[]);t.forEach(e=>i(k(e))),Object.values(Q).forEach(t=>{i(t(e))}),o(z,t=>(t.delete(e),new Set(t)));return}Object.keys(r).forEach(t=>{void 0!==Q[t]&&o(Q[t](e),r[t])}),o(z,t=>t.has(e)?t:(t.add(e),new Set(t)))}}),ee=(0,s.CG)({key:"ElementKindSelectorFamily",get:e=>t=>{let{get:r}=t;return r(W(e))}}),et=(0,s.CG)({key:"GetElementCanDeleteSelector",get:e=>t=>{let{get:r}=t;return r(V(e))}});(0,s.CG)({key:"GetElementCanDirectionEnterSelector",get:e=>t=>{let{get:r}=t;return r(H(e))}});let er=(0,s.CG)({key:"GetElementCanDirectionLeaveSelector",get:e=>t=>{let{get:r}=t;return r(Y(e))}}),en=(0,s.CG)({key:"GetElementCanDuplicateSelector",get:e=>t=>{let{get:r}=t;return r(X(e))}}),eo=(0,s.nZ)({key:"GetAllElementIdsSelector",get:e=>{let{get:t}=e;return Array.from(t(z))}}),ei=(0,s.nZ)({key:"GetAllElementStateSelector",get:e=>{let{get:t}=e;return t(eo).map(e=>t(K(e)))}}),ea=(0,s.CG)({key:"GetElementIdsFromDiagramId",get:e=>t=>{let{get:r}=t;return r(eo).filter(t=>r(J(t))===e)}}),es=(0,s.CG)({key:"DiagramElementPositionSelectorFamily",get:e=>t=>{let{get:r}=t;return r($(e))},set:e=>(t,r)=>{let{set:n}=t;n($(e),r)}}),el=(0,s.CG)({key:"DiagramElementNameSelectorFamily",get:e=>t=>{let{get:r}=t,n=r(W(e));return r(n===p.Node?v(r(G(e))):_(e))}}),ec=(0,s.CG)({key:"DiagramElementSizeSelectorFamily",get:e=>t=>{let{get:r}=t,n=r(M),o=r(ee(e));if(o===p.End||o===p.Start){let e=1.2*n.elementSize;return new c(e,e)}let i=r(el(e)),a=Math.max((0,f.Z)(i),3);return new c(a*n.elementSize/1.65+10,3*n.elementSize)}}),eu=()=>(0,s._8)(e=>{let{reset:t}=e;return e=>{t(K(e))}},[]),ef=()=>{let e=R();return(0,s._8)(t=>{let{snapshot:r,set:n}=t;return async(t,o,i)=>{let[a,s]=await Promise.all([r.getPromise(K(t)),r.getPromise(N(t))]);void 0===i&&(i=a.position.add(new c(10,10)));let u={...a,id:o,position:i},f=await Promise.all(s.map(e=>r.getPromise(k(e))));return n(K(o),u),f.forEach(r=>{let{fromId:n,toId:i}=r;n===t&&(n=o),i===t&&(i=o),e(l.getID(),n,i)}),o}},[e])},ep=(0,s.cn)({key:"CurrentDiagramIdAtom",default:""}),ed=(0,s.cn)({key:"CurrentDiagramMousePositionAtom",default:new c(0,0)}),eh=(0,s.cn)({key:"CurrentSelectElementIdAtom",default:""}),ey=(0,s.nZ)({key:"DiagramAndJsonTypeSelector",get:e=>{let{get:t}=e,r=t(x),n=t(ei),o=t(I);return{diagrams:r,elements:n,directions:o}},set:(e,t)=>{let{get:r,set:n,reset:o}=e;if(t instanceof s.nY)return;r(b).forEach(e=>{o(g(e))}),t.diagrams.forEach(e=>{n(g(e.id),e)}),t.elements.forEach(e=>{n(K(e.id),e)}),t.directions.forEach(e=>{n(k(e.id),e)});let i=t.diagrams.at(0),a=void 0!==i?i.id:"";n(ep,a)}}),em=(0,s.nZ)({key:"DiagramAndJsonSelector",get:e=>{let{get:t}=e;return JSON.stringify(t(ey))},set:(e,t)=>{let{set:r}=e;if(t instanceof s.nY)return;let n=new Map,o=JSON.parse(t,(e,t)=>t&&"object"==typeof t&&"x"in t&&"y"in t?c.fromJson(t):t),i=o[u.diagrams],a=o[u.elements],f=o[u.directions];i.forEach(e=>n.set(e.id,l.getID())),a.forEach(e=>n.set(e.id,l.getID())),f.forEach(e=>n.set(e.id,l.getID()));let p=i.map(e=>({...e,id:n.get(e.id)})),d=a.map(e=>{let t={...e,id:n.get(e.id),diagramId:n.get(e.diagramId)};return"bindDiagramId"in e&&(t={...t,bindDiagramId:n.get(e.bindDiagramId)}),t}),h=f.map(e=>({id:n.get(e.id),fromId:n.get(e.fromId),toId:n.get(e.toId)}));r(ey,{diagrams:p,elements:d,directions:h})}});var eg=r(2228),eb=r(6021);function ex(){let e=(0,eg.Z)(["\n    display: flex;\n    flex-flow: column nowrap;\n    justify-content: flex-start;\n    height: 100%;\n    width: 100%;\n"]);return ex=function(){return e},e}let ev=eb.ZP.div(ex()),eS=e=>{let[t,r]=(0,a.useState)(new c(0,0));return(0,a.useEffect)(()=>{let t=new ResizeObserver(e=>{if(0==e.length)return;let t=e[0].contentRect;r(new c(t.width,t.height))});return e.current&&t.observe(e.current),()=>t.disconnect()},[e]),t};function ew(){let e=(0,eg.Z)(["\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    display: block;\n    background-image: none;\n"]);return ew=function(){return e},e}let eE=eb.ZP.svg(ew());var ej=r(4690),eA=r(6600);let eO=function(e,t){let{onMouseLeftClick:r,onMouseRightClick:n}=t,o=!(arguments.length>2)||void 0===arguments[2]||arguments[2],[i,s]=(0,a.useState)(o);return(0,eA.Z)(e,"contextmenu",e=>{void 0!==n&&(e.preventDefault(),n(e))}),(0,eA.Z)(e,"click",e=>{i&&0===e.button&&void 0!==r&&r(e)}),[i,s]},eP=function(e,t){let{onMouseEnter:r,onMouseLeave:n,onMouseMove:o}=t,i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],[s,l]=(0,a.useState)(i);return(0,eA.Z)(e,"mouseenter",e=>{s&&void 0!==r&&r(e)}),(0,eA.Z)(e,"mouseleave",e=>{s&&void 0!==n&&n(e)}),(0,eA.Z)(e,"mousemove",e=>{s&&void 0!==o&&o(e)}),[s,l]},ek=(0,s.xu)({key:"NavigationDirectionAtomFamily",default:e=>({diagramId:e,fromElementId:null,toElementId:null})}),eC=(0,s.nZ)({key:"NavigationDirectionSelector",get:e=>{let t,{get:r}=e,{fromElementId:n,toElementId:o}=r(ek(r(ep)));if(null===n)return{fromRectangle:null,toRectangle:null};let i=r(ed),a=e=>({position:r(es(e)),size:r(ec(e))}),s=a(n);return t=null===o?{position:i.sub(new c(0,s.size.y/2)),size:s.size}:a(o),{fromRectangle:s,toRectangle:t}}}),eI=(e,t,r)=>{let n=(0,s.sJ)(M),o=(0,s.sJ)(eh),i=(0,s.sJ)(er(e)),[l,c]=(0,a.useState)(n.directionLight),u=(0,s._8)(t=>{let{set:r,snapshot:n}=t;return async t=>{t.stopPropagation();let{canDirectionLeave:o,diagramId:i}=await n.getPromise(K(e));o&&(r(ek(i),t=>({...t,fromElementId:e})),r(g(i),e=>({...e,createDirectionMode:!0})))}},[e]);return eO(r,{onMouseLeftClick:u}),eP(r,{onMouseEnter:()=>c(n.directionDark),onMouseLeave:()=>c(n.directionLight)}),{isVisible:o===e&&i,color:l}},eT=e=>{let{elementId:t,elementRef:r}=e,o=(0,a.useRef)(null),{isVisible:i,color:l}=eI(t,r,o),c=(0,s.sJ)(ec(t));return(0,n.jsx)("g",{visibility:i?"visible":"hidden",style:{pointerEvents:"visible"},transform:"translate(".concat(c.x," ").concat(c.y/2-10,")"),children:(0,n.jsx)(ej.Z,{ref:o,inheritViewBox:!0,sx:{fontSize:20,color:l,border:0,strokeWidth:0,opacity:.5,textAlign:"center",margin:0,padding:0}})})},eN=[],eR=[],eD=()=>(0,a.useCallback)(async e=>{let t=await e.execute();return eN.push(e),eR.length=0,t},[]),eM=()=>{let e=(0,a.useCallback)(()=>{let e=eN.pop();void 0!==e&&(e.undo(),eR.push(e))},[]);return e},eF=()=>{let e=(0,a.useCallback)(()=>{let e=eR.pop();void 0!==e&&(e.execute(),eN.push(e))},[]);return e},e_=(e,t)=>{let{onMouseDrag:r,onMouseDown:n,onMouseUp:o,draggable:i=!0}=t,[s,l]=(0,a.useState)(i),u=(0,a.useRef)(!1),f=(0,a.useRef)(new c(0,0)),p=(0,a.useCallback)(e=>{if(e instanceof MouseEvent)return new c(e.screenX,e.screenY);if(e instanceof TouchEvent){let t=e.touches[0];return new c(t.screenX,t.screenY)}},[]),d=(0,a.useCallback)(e=>{let t=p(e),r=f.current;return f.current=t,t.sub(r)},[p,f]);return(0,a.useEffect)(()=>{let e=new AbortController,t=e=>{void 0!==r&&u.current&&s&&r({event:e,movement:d(e)})};return window.addEventListener("mousemove",t,{signal:e.signal}),window.addEventListener("touchmove",t,{signal:e.signal}),()=>{e.abort()}},[s,u,r,d]),(0,a.useEffect)(()=>{let t=new AbortController,r=e=>{e instanceof MouseEvent&&0!==e.button||(f.current=p(e),u.current=!0,void 0!==n&&u.current&&n({event:e}))};return e.current.addEventListener("mousedown",r,{signal:t.signal}),e.current.addEventListener("touchstart",r,{signal:t.signal}),()=>{t.abort()}},[n,p,e,u,f]),(0,a.useEffect)(()=>{let e=new AbortController,t=e=>{u.current&&void 0!==o&&(u.current=!1,o({event:e,movement:d(e)}))};return window.addEventListener("mouseup",t,{signal:e.signal}),window.addEventListener("touchend",t,{signal:e.signal}),window.addEventListener("touchcancel",t,{signal:e.signal}),()=>{e.abort()}},[u,o,d]),[s,l]},eB=e=>{let t=(0,a.useRef)(new c(0,0)),r=(0,s._8)(r=>{let{snapshot:n}=r;return async()=>{t.current=await n.getPromise(es(e))}},[]);return(0,a.useEffect)(()=>{r()},[r]),(0,s._8)(r=>{let{set:n}=r;return async r=>{let o=t.current.copy();return{execute:()=>{n(es(e),r),t.current=r},undo:()=>{n(es(e),o),t.current=o}}}},[])},eZ=(e,t)=>{let r=(0,a.useRef)(!1),n=eD(),o=(0,s.Zl)(es(e)),i=eB(e),l=(0,a.useCallback)(async e=>{let{event:t,movement:n}=e;t.stopPropagation(),o(e=>e.add(n)),r.current=!0},[o]),c=(0,s._8)(t=>{let{snapshot:o}=t;return async t=>{let{event:a,movement:s}=t;if(!r.current)return;r.current=!1;let l=await o.getPromise(es(e));n(await i(l.add(s)))}},[n,e,i]);e_(t,{onMouseDrag:l,onMouseUp:c,onMouseDown:e=>{let{event:t}=e;return t.stopPropagation()}})};var eq=r(4833),eU=r(4352),eG=r(2056);let eL=()=>{let e=B(),t=eu();return(0,a.useCallback)(function(r,n){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new c(0,0),i=l.getID();return{execute:()=>{e(i,r,n,o)},undo:()=>{t(i)}}},[e,t])},ez=()=>{let e=L(),t=eu();return(0,a.useCallback)(function(r,n){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new c(0,0),i=l.getID();return{execute:()=>{e(i,r,n,o)},undo:()=>{t(i)}}},[e,t])},eJ=()=>{let e=ef(),t=eu();return(0,a.useCallback)((r,n)=>{let o=l.getID();return{execute:()=>{e(r,o,n)},undo:()=>{t(o)}}},[t,e])},e$=()=>{let e=eu(),t=R();return(0,s._8)(r=>{let{snapshot:n,set:o}=r;return async r=>{let i=await n.getPromise(K(r)),a=await n.getPromise(N(r)),s=await Promise.all(a.map(e=>n.getPromise(k(e))));return{execute:()=>{e(r)},undo:()=>{o(K(r),i),s.forEach(e=>{let{id:r,fromId:n,toId:o}=e;t(r,n,o)})}}}},[e])};var eW=r(4751);let eV=(e,t)=>{let[r,o]=(0,a.useState)(!1),[i,s]=(0,a.useState)(new c(0,0)),l=(e,t)=>{s(new c(e,t)),o(!0)},u=()=>{o(!1)},f=(0,a.useMemo)(()=>(0,n.jsx)(eW.ZP,{anchorReference:"anchorPosition",anchorPosition:{top:i.y,left:i.x},open:r,onClose:u,children:e({open:l,close:u})},"Menu:".concat(t)),[t,r,i,e]);return{open:l,close:u,popover:f}},eH=e=>{let t=eD(),r=(0,s.sJ)(et(e)),o=(0,s.sJ)(en(e)),i=e$(),l=eJ(),c=(0,a.useCallback)(a=>{let{close:s}=a;return(0,n.jsxs)(eq.Z,{children:[(0,n.jsx)(eU.Z,{onClick:async()=>t(await i(e)),disabled:!r,children:(0,n.jsx)(eG.Z,{children:"Delete Element"})}),(0,n.jsx)(eU.Z,{onClick:async()=>{t(await l(e)),s()},disabled:!o,children:(0,n.jsx)(eG.Z,{children:"Duplicate Element"})})]})},[r,o,t,i,l,e]),{open:u,close:f,popover:p}=eV(c,e);return{open:u,close:f,menuElement:p}},eY=(e,t,r)=>{let{open:n,menuElement:o}=eH(e),i=(0,s.Zl)(eh);eO(r,{onMouseRightClick:e=>{n(e.pageX,e.pageY)},onMouseLeftClick:()=>{i(e)}});let a=(0,s._8)(t=>{let{snapshot:r,set:n}=t;return async t=>{t.stopPropagation();let{diagramId:o,canDirectionEnter:i}=await r.getPromise(K(e)),{createDirectionMode:a}=await r.getPromise(g(o));a&&i&&n(ek(o),t=>({...t,toElementId:e}))}},[e]),l=(0,s._8)(t=>{let{snapshot:r,set:n}=t;return async t=>{t.stopPropagation();let{diagramId:o}=await r.getPromise(K(e)),{createDirectionMode:i}=await r.getPromise(g(o));i&&n(ek(o),e=>({...e,toElementId:null}))}},[e]);return eP(r,{onMouseEnter:a,onMouseLeave:l}),{menuElement:o}},eX=e=>{let{elementId:t}=e,r=(0,s.sJ)(M),o=(0,a.useRef)(null),i=(0,a.useRef)(null),l=(0,s.sJ)(es(t)),c=(0,s.sJ)(ec(t)),{menuElement:u}=eY(t,o,i);return eZ(t,i),(0,n.jsxs)("g",{fill:r.startAndEndNodeColor,stroke:r.startAndEndNodeColor,transform:"translate(".concat(l.x," ").concat(l.y,")"),id:"".concat(t),ref:o,children:[(0,n.jsx)(eT,{elementId:t,elementRef:o}),(0,n.jsx)("g",{ref:i,children:(0,n.jsx)("path",{d:"M ".concat(c.x," 0 l 0 ").concat(c.y," l ").concat(-c.x," ").concat(-c.y/2)})}),u]})};function eQ(){let e=(0,eg.Z)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 100%;\n"]);return eQ=function(){return e},e}function eK(){let e=(0,eg.Z)(["\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    width: 100%;\n    height: 100%;\n"]);return eK=function(){return e},e}function e0(){let e=(0,eg.Z)(["\n    display: flex;\n    justify-content: flex-end;\n    align-items: center;\n    width: 100%;\n    height: 100%;\n"]);return e0=function(){return e},e}let e1=eb.ZP.div(eQ()),e2=eb.ZP.div(eK());eb.ZP.div(e0());let e6=()=>(0,s._8)(e=>{let{snapshot:t,set:r}=e;return async(e,n)=>{let o=await t.getPromise(_(e));return{execute:()=>{r(_(e),n)},undo:()=>{r(_(e),o)}}}},[]),e3={primary:"#2b2b2b"},e8={primary:"monospace, serif"};function e4(){let e=(0,eg.Z)(["\n    text-align: center;\n    font-size: ","px;\n    width: ","px;\n    height: ","px;\n    background-color: ",";\n    border: none;\n    outline: none;\n    font-family: ",";\n    color: ",";\n"]);return e4=function(){return e},e}let e5=eb.ZP.input(e4(),e=>{let{fontSizePx:t}=e;return t},e=>{let{width:t}=e;return t},e=>{let{height:t}=e;return t},e=>{let{backGroundColor:t}=e;return t},e8.primary,e3.primary),e9=e=>{let{elementId:t}=e,r=(0,s.sJ)(M),o=(0,a.useRef)(null),i=(0,a.useRef)(null),l=(0,a.useRef)(null),c=(0,s.sJ)(es(t)),u=(0,s.sJ)(el(t)),f=(0,s.sJ)(ec(t)),{menuElement:p}=eY(t,o,i),d=eD(),h=e6();return eZ(t,i),(0,a.useEffect)(()=>{l.current.value=u},[u]),(0,n.jsxs)("g",{fill:r.elementFillColor,stroke:r.elementStrokeColor,transform:"translate(".concat(c.x," ").concat(c.y,")"),id:"".concat(t),ref:o,children:[(0,n.jsx)(eT,{elementId:t,elementRef:o}),(0,n.jsxs)("g",{ref:i,children:[(0,n.jsx)("rect",{x:"0",y:"0",width:f.x,height:f.y,rx:"10",ry:"30"}),(0,n.jsx)("foreignObject",{width:f.x,height:f.y,overflow:"visible",children:(0,n.jsx)(e1,{children:(0,n.jsx)(e5,{ref:l,width:f.x-10,height:.5*f.y,fontSizePx:r.elementSize,backGroundColor:r.elementFillColor,type:"text",onChange:async e=>{e.preventDefault(),d(await h(t,e.target.value))},draggable:"false"})})})]}),p]})},e7=e=>{let{elementId:t}=e,r=(0,s.sJ)(M),o=(0,a.useRef)(null),i=(0,a.useRef)(null),l=(0,s.sJ)(es(t)),c=(0,s.sJ)(el(t)),u=(0,s.sJ)(ec(t)),{menuElement:f}=eY(t,o,i);return eZ(t,i),(0,n.jsxs)("g",{fill:r.elementFillColor,stroke:r.elementStrokeColor,transform:"translate(".concat(l.x," ").concat(l.y,")"),id:"".concat(t),ref:o,children:[(0,n.jsx)(eT,{elementId:t,elementRef:o}),(0,n.jsxs)("g",{ref:i,children:[(0,n.jsx)("rect",{x:"0",y:"0",width:u.x,height:u.y}),(0,n.jsx)("foreignObject",{width:u.x,height:u.y,overflow:"visible",children:(0,n.jsx)(e1,{children:(0,n.jsx)(e5,{width:u.x-10,height:.5*u.y,fontSizePx:r.elementSize,backGroundColor:r.elementFillColor,type:"text",value:c,draggable:"false",readOnly:!0})})})]}),f]})},te=e=>{let{elementId:t}=e,r=(0,s.sJ)(M),o=(0,a.useRef)(null),i=(0,a.useRef)(null),l=(0,s.sJ)(es(t)),c=(0,s.sJ)(ec(t)),{menuElement:u}=eY(t,o,i);return eZ(t,i),(0,n.jsxs)("g",{fill:r.startAndEndNodeColor,stroke:r.startAndEndNodeColor,transform:"translate(".concat(l.x," ").concat(l.y,")"),id:"".concat(t),ref:o,children:[(0,n.jsx)(eT,{elementId:t,elementRef:o}),(0,n.jsx)("g",{ref:i,children:(0,n.jsx)("path",{d:"M 0 0 l 0 ".concat(c.y," l ").concat(c.x," ").concat(-c.y/2)})}),u]})},tt=a.memo(e=>{let{elementId:t}=e,{kind:r}=(0,s.sJ)(K(t)),o=null;return r===p.Node?o=(0,n.jsx)(e7,{elementId:t},t):r===p.Leaf?o=(0,n.jsx)(e9,{elementId:t},t):r===p.Start?o=(0,n.jsx)(te,{elementId:t},t):r===p.End&&(o=(0,n.jsx)(eX,{elementId:t},t)),o}),tr=()=>{let e=R(),t=D();return(0,s._8)(r=>{let{snapshot:n}=r;return async r=>{let{id:o,fromId:i,toId:a}=await n.getPromise(k(r));return{execute:()=>{t(r)},undo:()=>{e(o,i,a)}}}},[e,t])},tn=e=>{let t=eD(),r=tr(),o=(0,a.useCallback)(()=>(0,n.jsx)(eq.Z,{children:(0,n.jsx)(eU.Z,{onClick:async()=>t(await r(e)),children:(0,n.jsx)(eG.Z,{children:"Delete Direction"})})}),[t,r,e]),{open:i,close:s,popover:l}=eV(o,e);return{open:i,close:s,menuElement:l}},to=(0,s.cn)({key:"DirectionTheme",default:{strokeColor:"#000000",directionHeadWidth:5,directionHeadHeight:5,carvePointOffset:15}}),ti=a.memo(e=>{let{fromRect:t,toRect:r}=e,o={x:t.position.x+t.size.x,y:t.position.y+t.size.y/2},i={x:r.position.x,y:r.position.y+r.size.y/2},a=(0,s.sJ)(to),l=(e,t)=>"q ".concat(e.x," ").concat(e.y,", ").concat(t.x," ").concat(t.y);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:(()=>{let e=[],n=i.x-o.x,s=i.y-o.y,u=0,f=s/2,p=Math.abs(s)<=(t.size.y+r.size.y)/2,d=!1;p&&n<0&&(f=s+(s<=0?-1:1)*r.size.y,d=!0);let h=Math.min(a.carvePointOffset,Math.abs(f)/2);Math.abs(f)<2*h&&n>=0&&(h=Math.min(h,n/2));let y=n-2*h<=0;y&&(u=n-h),u=Math.min(0,u);let m=h*(f<0?-1:1);return e.push("M ".concat(o.x," ").concat(o.y)),e.push(l(new c(h,0),new c(h,m))),y&&(e.push("v ".concat(f-2*m)),e.push(l(new c(0,m),new c(-h,m))),e.push("h ".concat(u)),e.push(l(new c(-h,0),new c(-h,m*(d?-1:1))))),e.push("V ".concat(i.y-m*(d?-1:1))),e.push(l(new c(0,m*(d?-1:1)),new c(h,m*(d?-1:1)))),e.push("L ".concat(i.x," ").concat(i.y)),e.join(" ")})(),stroke:a.strokeColor,fill:"transparent"}),(0,n.jsx)("path",{d:(()=>{let e=a.directionHeadWidth,t=a.directionHeadHeight;return"M ".concat(i.x," ").concat(i.y," L ").concat(i.x-e," ").concat(i.y-t," L ").concat(i.x-e," ").concat(i.y+t)})(),stroke:a.strokeColor,fill:a.strokeColor})]})}),ta=a.memo(e=>{let{directionId:t}=e,{fromId:r,toId:o}=(0,s.sJ)(k(t)),[i,l]=[(0,s.sJ)(es(r)),(0,s.sJ)(ec(r))],[c,u]=[(0,s.sJ)(es(o)),(0,s.sJ)(ec(o))],f=(0,a.useRef)(null),{open:p,menuElement:d}=tn(t),h=e=>{p(e.pageX,e.pageY)};return eO(f,{onMouseRightClick:h}),(0,n.jsxs)("g",{style:{pointerEvents:"visibleStroke"},ref:f,children:[(0,n.jsx)(ti,{fromRect:{position:i,size:l},toRect:{position:c,size:u}},t),d]})}),ts=a.memo(e=>{let{value:t,onTrue:r,onFalse:n}=e;return t?r:n}),tl=a.memo(()=>{let{fromRectangle:e,toRectangle:t}=(0,s.sJ)(eC);return(0,n.jsx)("g",{style:{pointerEvents:"none"},children:(0,n.jsx)(ts,{value:null===e||null===t,onTrue:null,onFalse:(0,n.jsx)(ti,{fromRect:e,toRect:t},"-1")})})}),tc="application/syntax-diagram-tab",tu=function(e,t){let{onDrop:r,onDragEnter:n,onDragLeave:o,onDragOver:i}=t,s=!(arguments.length>2)||void 0===arguments[2]||arguments[2],[l,c]=(0,a.useState)(s);return(0,eA.Z)(e,"dragover",e=>{l&&((void 0!==r||void 0!==i)&&e.preventDefault(),void 0!==i&&i(e))}),(0,eA.Z)(e,"drop",e=>{l&&void 0!==r&&r(e)}),(0,eA.Z)(e,"dragenter",e=>{l&&void 0!==n&&n(e)}),(0,eA.Z)(e,"dragleave",e=>{l&&void 0!==o&&o(e)}),(0,eA.Z)(e,"dragover",e=>{l&&void 0!==i&&i(e)}),[l,c]},tf=()=>{let e=R(),t=D();return(0,a.useCallback)((r,n)=>{let o=l.getID();return{execute:()=>{e(o,r,n)},undo:()=>{t(o)}}},[e,t])},tp=(e,t)=>{let r=eD(),n=tf(),o=ez(),i=(0,s._8)(t=>{let{snapshot:o,set:i}=t;return async()=>{let t=await o.getPromise(w(e));if(!t)return;let a=await o.getPromise(ek(e)),s=a.fromElementId,l=a.toElementId;null!==s&&null!==l&&r(n(s,l)),i(w(e),!1),i(ek(e),e=>({...e,fromElementId:null,toElementId:null}))}},[e]);eO(t,{onMouseLeftClick:i});let a=e=>{let t=e.dataTransfer;null!==t&&(t.dropEffect="move",e.preventDefault())},l=(0,s._8)(t=>{let{snapshot:n}=t;return async t=>{let i=t.dataTransfer;if(null===i||!i.types.includes(tc))return;t.preventDefault();let a=await n.getPromise(ep);if(""===a)return;let s=await n.getPromise(S(a)),l=new c(t.offsetX,t.offsetY).add(s),u=i.getData(tc);r(o(e,u,l))}},[r,o]),u=e=>{let t=e.dataTransfer;t.dropEffect="move"},f=e=>{let t=e.dataTransfer;if(null===t)return};tu(t,{onDrop:l,onDragEnter:a,onDragLeave:f,onDragOver:u});let p=(0,s._8)(t=>{let{set:r}=t;return t=>{let{event:n,movement:o}=t;n.stopPropagation(),r(S(e),e=>e.sub(o))}},[e]);e_(t,{onMouseDrag:p})},td=a.memo(e=>{let{diagramId:t}=e,r=(0,a.useRef)(null),o=eS(r),i=(0,s.sJ)(S(t)),l="".concat(i.x," ").concat(i.y," ").concat(o.x," ").concat(o.y),c=(0,s.sJ)(ea(t)).map(e=>(0,n.jsx)(tt,{elementId:e},e)),u=(0,s.sJ)(T(t)).map(e=>(0,n.jsx)(ta,{directionId:e},e));return tp(t,r),(0,n.jsx)("div",{ref:r,style:{width:"100%",height:"100%",position:"relative"},children:(0,n.jsxs)(eE,{viewBox:l,children:[c,u,(0,n.jsx)(tl,{})]})})}),th=()=>{let e=E(),t=j(),r=Z(),n=q();return(0,s._8)(o=>{let{set:i}=o;return o=>{let a=l.getID();return{execute:()=>(e(a,o),r(l.getID(),a),n(l.getID(),a,new c(300,300)),i(ep,a),a),undo:()=>{t(a)}}}},[e,n,r,t])};var ty=r(5665);let tm=(0,s.cn)({key:"GlobalThemeAtom",default:{borderColor:"#e0e0e0"}}),tg=(0,s.cn)({key:"ControlToolbarThemeAtom",default:{backGroundColor:"#ffffff",heightPx:30,buttonColor:"#505050",buttonSizePx:15}}),tb=(0,s.cn)({key:"SelectToolbarThemeAtom",default:{backGroundColor:"#e7e7e7",selectedTabColor:"#ffffff",maxTabWidthPx:100,heightPx:50,buttonSizePx:15}});var tx=r(6842),tv=r(6567),tS=r(5801);let tw=a.memo(e=>{let{color:t="primary"}=e,r=eF();return(0,n.jsx)(tv.Z,{title:"redo",children:(0,n.jsx)(tS.Z,{"aria-label":"redo",about:"redo",onClick:()=>r(),sx:{color:t},children:(0,n.jsx)(tx.Z,{})})})});var tE=r(2679);let tj=a.memo(e=>{let{color:t="primary"}=e,r=eM();return(0,n.jsx)(tv.Z,{title:"undo",children:(0,n.jsx)(tS.Z,{"aria-label":"undo",about:"undo",onClick:()=>r(),sx:{color:t},children:(0,n.jsx)(tE.Z,{})})})});var tA=r(3553);let tO=a.memo(e=>{let{color:t="primary"}=e,r=eD(),o=eL(),i=(0,s._8)(e=>{let{snapshot:t}=e;return async()=>{let e=await t.getPromise(ep);if(""===e)return;let n=await t.getPromise(S(e));r(o(e,"aLeaf",n))}},[]);return(0,n.jsx)(tv.Z,{title:"crate terminal",children:(0,n.jsx)(tS.Z,{"aria-label":"create terminal",about:"create terminal",onClick:i,sx:{color:t},children:(0,n.jsx)(tA.Z,{})})})}),tP=a.memo(()=>{let e=(0,s.sJ)(tg),{borderColor:t}=(0,s.sJ)(tm);return(0,n.jsxs)(ty.Z,{variant:"regular",style:{backgroundColor:e.backGroundColor,flexBasis:"".concat(e.heightPx,"px"),height:"".concat(e.heightPx,"px"),minHeight:"".concat(e.heightPx,"px"),borderColor:t,borderStyle:"solid",borderWidth:"1px 0px 2px 0px"},children:[(0,n.jsx)(tj,{color:e.buttonColor}),(0,n.jsx)(tw,{color:e.buttonColor}),(0,n.jsx)(tO,{color:e.buttonColor})]})});function tk(){let e=(0,eg.Z)(["\n    display: flex;\n    flex-flow: row nowrap;\n    justify-content: flex-start;\n    height: 100%;\n    width: 100%;\n"]);return tk=function(){return e},e}let tC=eb.ZP.div(tk()),tI=a.memo(()=>{let e=(0,s.sJ)(tm),t=eD(),r=th(),o=(0,s.Zl)(ep);return(0,n.jsx)(e1,{style:{width:"max-content",height:"100%",border:"1px solid ".concat(e.borderColor)},children:(0,n.jsx)(tS.Z,{"aria-label":"add syntaxDiagram",about:"add syntaxDiagram",onClick:()=>{t(r("aStatement")).then(e=>{o(e)})},children:(0,n.jsx)(tA.Z,{})})})}),tT=function(e,t){let{onDragStart:r,onDragging:n,onDragEnd:o}=t,i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],[s,l]=(0,a.useState)(i);return null!==e.current&&e.current.setAttribute("draggable",s?"true":"false"),(0,eA.Z)(e,"dragstart",e=>{s&&void 0!==r&&r(e)}),(0,eA.Z)(e,"drag",e=>{s&&void 0!==n&&n(e)}),(0,eA.Z)(e,"dragend",e=>{s&&void 0!==o&&o(e)}),[s,l]},tN=()=>{let e=E(),t=j(),r=e$();return(0,s._8)(n=>{let{snapshot:o}=n;return async n=>{let[i,a]=await Promise.all([o.getPromise(g(n)),o.getPromise(ea(n))]),s=await Promise.all(a.map(e=>r(e)));return{execute:()=>{t(n)},undo:()=>{e(n,i.name),s.forEach(e=>e.undo())}}}},[])},tR=e=>{let t=eD(),r=ez(),o=tN(),i=(0,s._8)(n=>{let{snapshot:o}=n;return async()=>{let n=await o.getPromise(ep);if(""===n)return;let i=await o.getPromise(S(n));t(r(n,e,i))}},[r,t]),l=(0,a.useCallback)(r=>{let{close:a}=r;return(0,n.jsxs)(eq.Z,{children:[(0,n.jsx)(eU.Z,{onClick:async()=>{i(),a()},children:(0,n.jsx)(eG.Z,{children:"Create Node"})}),(0,n.jsx)(eU.Z,{onClick:async()=>t(await o(e)),children:(0,n.jsx)(eG.Z,{children:"Delete Diagram"})})]})},[t,o,e,i]),{open:c,close:u,popover:f}=eV(l,e);return{open:c,close:u,menuElement:f}},tD=()=>(0,s._8)(e=>{let{snapshot:t,set:r}=e;return async e=>{let n=await t.getPromise(ep);return{execute:()=>{r(ep,e)},undo:()=>{r(ep,n)}}}},[]),tM=()=>{let e=A();return(0,s._8)(t=>{let{snapshot:r}=t;return async(t,n)=>{let o=await r.getPromise(v(t));return{execute:()=>{e(t,n)},undo:()=>{e(t,o)}}}},[e])};function tF(){let e=(0,eg.Z)(["\n    flex-shrink: 1000;\n    font-size: ","px;\n    width: ","px;\n    max-width: ","px;\n    border-color: ",";\n    height: 100%;\n    border-width: 0px 1px 0px 0px;\n    border-style: solid;\n    background-color: ",";\n    padding: 0px 4px;\n"]);return tF=function(){return e},e}function t_(){let e=(0,eg.Z)(["\n    text-align: center;\n    width: 100%;\n    background-color: ",";\n    border: none;\n    outline: none;\n    overflow: scroll;\n    font-family: ",";\n    color: ",";\n"]);return t_=function(){return e},e}let tB=eb.ZP.div(tF(),e=>{let{fontSizePx:t}=e;return t},e=>{let{widthPx:t}=e;return t},e=>{let{maxWidthPx:t}=e;return t},e=>{let{borderColor:t}=e;return t},e=>{let{backGroundColor:t}=e;return t}),tZ=eb.ZP.input(t_(),e=>{let{backGroundColor:t}=e;return t},e8.primary,e3.primary),tq=a.memo(e=>{let{diagramId:t,isSelected:r,widthPx:o}=e,{borderColor:i}=(0,s.sJ)(tm),l=(0,s.sJ)(tb),c=(0,a.useRef)(null),u=(0,a.useRef)(null),f=(0,s.sJ)(v(t)),p=eD(),d=tD(),h=tM(),{open:y,menuElement:m}=tR(t),g=r?l.selectedTabColor:l.backGroundColor,b=async e=>{p(await d(t))},x=e=>{y(e.pageX,e.pageY)};eO(c,{onMouseLeftClick:b,onMouseRightClick:x});let S=e=>{let r=e.dataTransfer;null!==r&&(r.effectAllowed="copyMove",r.clearData(tc),r.setData(tc,t))};return tT(c,{onDragStart:S}),(0,a.useEffect)(()=>{u.current.value=f},[f]),(0,n.jsxs)(tB,{fontSizePx:l.heightPx/4,borderColor:i,widthPx:o,maxWidthPx:l.maxTabWidthPx,backGroundColor:g,ref:c,draggable:!0,onDragStart:e=>console.log(e),children:[(0,n.jsx)(e1,{children:(0,n.jsx)(tZ,{ref:u,backGroundColor:g,onChange:async e=>{e.preventDefault(),p(await h(t,e.target.value))}})}),m]})}),tU=a.memo(()=>{let e=(0,s.sJ)(ep),t=(0,s.sJ)(b),r=(0,s.sJ)(tb),{borderColor:o}=(0,s.sJ)(tm),i=(0,a.useRef)(null),l=eS(i);return(0,n.jsxs)(tC,{ref:i,style:{backgroundColor:r.backGroundColor,borderTop:"2px solid ".concat(o),flexBasis:"".concat(r.heightPx,"px"),height:"".concat(r.heightPx,"px")},children:[t.map(r=>(0,n.jsx)(tq,{widthPx:l.x/t.length,diagramId:r,isSelected:r===e},"Tab:".concat(r))),(0,n.jsx)(tI,{})]})}),tG=e=>{let t=(0,s.Zl)(ed),r=(0,s._8)(r=>{let{snapshot:n}=r;return async r=>{let o=e.current,i=await n.getPromise(ep);if(void 0===o||""===i)return;let a=await n.getPromise(S(i));t(new c(r.clientX-o.offsetLeft,r.clientY-o.offsetTop).add(a))}},[t]);eP(e,{onMouseMove:r})},tL=a.memo(()=>(0,n.jsx)("div",{style:{height:"100%"},children:(0,n.jsx)(e1,{children:(0,n.jsxs)("div",{style:{display:"block",textAlign:"center"},children:[(0,n.jsx)("span",{children:(0,n.jsx)("p",{children:"No syntax diagram."})}),(0,n.jsx)("span",{children:(0,n.jsx)("p",{children:"Press the below '+' button to create a syntax diagram."})})]})})})),tz=a.memo(()=>{let e=(0,s.sJ)(ep),t=(0,a.useRef)(null),r=th(),o=(0,s.Zl)(ep);return tG(t),(0,a.useEffect)(()=>{let e=r("aStatement").execute();o(e)},[r,o]),(0,n.jsxs)(ev,{children:[(0,n.jsx)(tP,{}),(0,n.jsx)("div",{ref:t,style:{width:"100%",height:"100%",position:"relative"},children:(0,n.jsx)(ts,{value:""!==e,onTrue:(0,n.jsx)(td,{diagramId:e},e),onFalse:(0,n.jsx)(tL,{})})}),(0,n.jsx)(tU,{})]})}),tJ={sum:e=>e.reduce((e,t)=>e+t,0)},t$=a.memo(e=>{let{moveSeparateLine:t}=e,r=(0,a.useRef)(null),{borderColor:o}=(0,s.sJ)(tm);return e_(r,{onMouseDrag:e=>{let{movement:r}=e;t(r.x)}}),(0,n.jsx)("div",{ref:r,style:{height:"100%",borderWidth:"0 ".concat(2,"px 0 0"),borderColor:o,borderStyle:"solid",cursor:"col-resize"},draggable:!1})}),tW=a.memo(e=>{let{children:t}=e,r=(0,a.useRef)(null),o=a.Children.count(t),[i,s]=(0,a.useState)(Array(o).fill(0)),l=eS(r),c=.3*l.x,u=(0,a.useCallback)(e=>t=>{e+1>=o||s(r=>r[e]+t<c||r[e+1]-t<c?r:(r[e]=Math.max(r[e]+t,c),r[e+1]=Math.max(r[e+1]-t,c),[...r]))},[o,c]);return(0,a.useEffect)(()=>{s(e=>{if(0===o)return;let t=tJ.sum(e);if(0===t)return e.map(()=>Math.max(l.x/o,c));let r=l.x/t,n=e.map(e=>Math.max(e*r,c)),i=l.x-tJ.sum(n);return n[o-1]=Math.max(n[o-1]+i,c),n})},[l,o,c]),(0,n.jsx)("div",{ref:r,style:{width:"100%",height:"100%"},children:(0,n.jsx)(tC,{children:a.Children.map(t,(e,t)=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{style:{width:"".concat(i[t],"px"),height:"100%"},children:e}),t===o-1?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(t$,{moveSeparateLine:u(t)})]}))})})});var tV=r(5669);let tH=(0,s.CG)({key:"GetASTSelectorFamily",get:e=>t=>{let{get:r}=t;try{let t=new tV.SyntaxDiagram(r(v(e))),n=new Map;r(ea(e)).forEach(e=>{let o;let i=r(ee(e));if(i===p.Node){let n=r(v(r(G(e))));console.log(n),o=t.createNode(new tV.SyntaxDiagram(n))}else o=t.createLeaf(r(el(e)));i===p.Start&&(o.isStart=!0),i===p.End&&(o.isEnd=!0),n.set(e,o)}),r(T(e)).forEach(e=>{let{fromId:t,toId:o}=r(k(e)),i=n.get(t),a=n.get(o);i.connectTo(a)});let o=t.toAST();return console.log(o.toString()),o}catch(e){return console.log(e),null}}}),tY=(0,s.cn)({key:"ResultViewThemeAtom",default:{cardHeight:50,currentCardBorderColor:"#00ccff"}});function tX(){let e=(0,eg.Z)(["\n    border-color: ",";\n    border-width: ",";\n    border-style: solid;\n    height: ","px;\n    width: 100%;\n"]);return tX=function(){return e},e}let tQ=eb.ZP.div(tX(),e=>{let{borderColor:t}=e;return t},e=>{let{borderWidth:t}=e;return t},e=>{let{heightPx:t}=e;return t}),tK=a.memo(e=>{let{children:t,isSelected:r}=e,o=(0,s.sJ)(tm),i=(0,s.sJ)(tY),a=r?i.currentCardBorderColor:o.borderColor;return(0,n.jsx)(tQ,{draggable:!1,heightPx:i.cardHeight,borderColor:a,borderWidth:r?"1px":"0px 0px 1px 0px",children:t})}),t0=a.memo(e=>{let{diagramId:t}=e,r=(0,s.sJ)(ep),o=(0,s.sJ)(tH(t)),i=null===o?"":o.toEBNF();return(0,n.jsx)(tK,{isSelected:r===t,children:(0,n.jsx)(e2,{children:(0,n.jsx)("pre",{style:{overflowX:"scroll",overflowY:"visible",paddingTop:"10px",paddingBottom:"10px",paddingLeft:"20px",height:"max-content",fontFamily:e8.primary,color:e3.primary},children:i})})})}),t1=a.memo(()=>{let e=(0,s.sJ)(b),t=(0,a.useRef)(null),r=eS(t);return(0,n.jsx)("div",{ref:t,children:(0,n.jsx)(ev,{style:{maxHeight:r.y},children:e.map(e=>(0,n.jsx)(t0,{diagramId:e},"Card:".concat(e)))})})});var t2=r(6897),t6=r(9825);class t3 extends Object{static async downloadFile(e,t){return new Promise((r,n)=>{document||n("document is not exists.");let o=document.createElement("a");o.href=URL.createObjectURL(e),o.download=t,o.click(),o.remove(),r()})}static async loadFileAsText(e){let t=new FileReader;return new Promise((r,n)=>{t.readAsText(e),t.onload=()=>{let e=t.result;"string"==typeof e&&r(e),n("load failed: type '".concat(typeof e,"' not match string."))},t.onerror=()=>{n(t.error)}})}}let t8=()=>{let e=(0,s.Zl)(em);return(0,s._8)(t=>{let{snapshot:r}=t;return async t=>{let[n,o,i]=await Promise.all([r.getPromise(x),r.getPromise(ei),r.getPromise(I)]);return{execute:()=>{e(t)},undo:()=>{e(JSON.stringify({diagrams:n,elements:o,directions:i}))}}}},[])};var t4=r(3497),t5=r(2048);let t9=a.memo(e=>{let{title:t,menuItemsFactory:r}=e,[o,i]=a.useState(null),s=Boolean(o),l=e=>{i(e.currentTarget)},c=()=>{i(null)};return(0,n.jsxs)("div",{children:[(0,n.jsx)(t5.Z,{id:"app-header-button","aria-controls":s?"app-header-file-menu":void 0,"aria-haspopup":"true","aria-expanded":s?"true":void 0,onClick:l,style:{padding:0,minWidth:0,fontFamily:e8.primary,color:e3.primary,fontWeight:"normal"},children:t},"app-header-button"),(0,n.jsx)(t4.Z,{id:"app-header-menu","aria-labelledby":"app-header-file-menu",anchorEl:o,open:s,onClose:c,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:r({handleClose:c})},"app-header-menu")]})}),t7=a.memo(()=>{let e=t8(),t=eD(),r=(0,s._8)(e=>{let{snapshot:t}=e;return async()=>{let e=await t.getPromise(em),r=new Blob([e],{type:"text/json"});await t3.downloadFile(r,"diagram.json")}},[]),o=(0,s._8)(()=>async r=>{r.preventDefault();let n=Array.from(r.currentTarget.files);0!==n.length&&t(await e(await t3.loadFileAsText(n[0])))},[]),i=(0,a.useCallback)(e=>{let{handleClose:t}=e;return[(0,n.jsx)(eU.Z,{onClick:()=>{r(),t()},children:"save"},"file-save-button"),(0,n.jsx)("label",{htmlFor:"file-load-button",children:(0,n.jsxs)(eU.Z,{children:["load",(0,n.jsx)("input",{id:"file-load-button",hidden:!0,type:"file",accept:"text/json",onInput:e=>{o(e),t()}},"file-load-input")]},"file-load-button")},"file-load-label")]},[o,r]);return(0,n.jsx)(t9,{title:"File",menuItemsFactory:i},"app-header-file-button")}),re=a.memo(()=>{let e=(0,s.sJ)(tg);return(0,n.jsx)(t2.Z,{position:"relative",elevation:0,children:(0,n.jsx)(ty.Z,{style:{backgroundColor:e.backGroundColor,borderWidth:"0px"},children:(0,n.jsxs)(ev,{children:[(0,n.jsx)(t6.Z,{variant:"h6",noWrap:!0,component:"a",href:"./",sx:{mr:2,fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:e.buttonColor,textDecoration:"none"},children:"BNFMaker"}),(0,n.jsx)(ty.Z,{style:{height:"fit-content",minHeight:"20px",padding:0},children:(0,n.jsx)(t7,{})})]})})})}),rt=a.memo(()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i(),{children:(0,n.jsx)("title",{children:"BNFMaker"})}),(0,n.jsxs)(ev,{children:[(0,n.jsx)(re,{}),(0,n.jsxs)(tW,{children:[(0,n.jsx)(tz,{}),(0,n.jsx)(t1,{})]})]})]}));var rr=rt},5669:function(e){"undefined"!=typeof self&&self,e.exports=(()=>{var e={696:(e,t,r)=>{"use strict";var n=r(406),o=r(716);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a,s,l=r(515).codes,c=l.ERR_AMBIGUOUS_ARGUMENT,u=l.ERR_INVALID_ARG_TYPE,f=l.ERR_INVALID_ARG_VALUE,p=l.ERR_INVALID_RETURN_VALUE,d=l.ERR_MISSING_ARGS,h=r(320),y=r(335).inspect,m=r(335).types,g=m.isPromise,b=m.isRegExp,x=Object.assign?Object.assign:r(956).assign,v=Object.is?Object.is:r(512);function S(){var e=r(796);a=e.isDeepEqual,s=e.isDeepStrictEqual}var w=!1,E=e.exports=P,j={};function A(e){if(e.message instanceof Error)throw e.message;throw new h(e)}function O(e,t,r,n){if(!r){var o=!1;if(0===t)o=!0,n="No value argument passed to `assert.ok()`";else if(n instanceof Error)throw n;var i=new h({actual:r,expected:!0,message:n,operator:"==",stackStartFn:e});throw i.generatedMessage=o,i}}function P(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];O.apply(void 0,[P,t.length].concat(t))}E.fail=function e(t,r,i,a,s){var l,c=arguments.length;if(0===c?l="Failed":1===c?(i=t,t=void 0):(!1===w&&(w=!0,(n.emitWarning?n.emitWarning:o.warn.bind(o))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===c&&(a="!=")),i instanceof Error)throw i;var u={actual:t,expected:r,operator:void 0===a?"fail":a,stackStartFn:s||e};void 0!==i&&(u.message=i);var f=new h(u);throw l&&(f.message=l,f.generatedMessage=!0),f},E.AssertionError=h,E.ok=P,E.equal=function e(t,r,n){if(arguments.length<2)throw new d("actual","expected");t!=r&&A({actual:t,expected:r,message:n,operator:"==",stackStartFn:e})},E.notEqual=function e(t,r,n){if(arguments.length<2)throw new d("actual","expected");t==r&&A({actual:t,expected:r,message:n,operator:"!=",stackStartFn:e})},E.deepEqual=function e(t,r,n){if(arguments.length<2)throw new d("actual","expected");void 0===a&&S(),a(t,r)||A({actual:t,expected:r,message:n,operator:"deepEqual",stackStartFn:e})},E.notDeepEqual=function e(t,r,n){if(arguments.length<2)throw new d("actual","expected");void 0===a&&S(),a(t,r)&&A({actual:t,expected:r,message:n,operator:"notDeepEqual",stackStartFn:e})},E.deepStrictEqual=function e(t,r,n){if(arguments.length<2)throw new d("actual","expected");void 0===a&&S(),s(t,r)||A({actual:t,expected:r,message:n,operator:"deepStrictEqual",stackStartFn:e})},E.notDeepStrictEqual=function e(t,r,n){if(arguments.length<2)throw new d("actual","expected");void 0===a&&S(),s(t,r)&&A({actual:t,expected:r,message:n,operator:"notDeepStrictEqual",stackStartFn:e})},E.strictEqual=function e(t,r,n){if(arguments.length<2)throw new d("actual","expected");v(t,r)||A({actual:t,expected:r,message:n,operator:"strictEqual",stackStartFn:e})},E.notStrictEqual=function e(t,r,n){if(arguments.length<2)throw new d("actual","expected");v(t,r)&&A({actual:t,expected:r,message:n,operator:"notStrictEqual",stackStartFn:e})};var k=function e(t,r,n){var o=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),r.forEach(function(e){e in t&&(void 0!==n&&"string"==typeof n[e]&&b(t[e])&&t[e].test(n[e])?o[e]=n[e]:o[e]=t[e])})};function C(e,t,r,n){if("function"!=typeof t){if(b(t))return t.test(e);if(2==arguments.length)throw new u("expected",["Function","RegExp"],t);if("object"!==i(e)||null===e){var o=new h({actual:e,expected:t,message:r,operator:"deepStrictEqual",stackStartFn:n});throw o.operator=n.name,o}var l=Object.keys(t);if(t instanceof Error)l.push("name","message");else if(0===l.length)throw new f("error",t,"may not be an empty object");return void 0===a&&S(),l.forEach(function(o){"string"==typeof e[o]&&b(t[o])&&t[o].test(e[o])||function(e,t,r,n,o,i){if(!(r in e)||!s(e[r],t[r])){if(!n){var a=new k(e,o),l=new k(t,o,e),c=new h({actual:a,expected:l,operator:"deepStrictEqual",stackStartFn:i});throw c.actual=e,c.expected=t,c.operator=i.name,c}A({actual:e,expected:t,message:n,operator:i.name,stackStartFn:i})}}(e,t,o,r,l,n)}),!0}return void 0!==t.prototype&&e instanceof t||!Error.isPrototypeOf(t)&&!0===t.call({},e)}function I(e){if("function"!=typeof e)throw new u("fn","Function",e);try{e()}catch(e){return e}return j}function T(e){return g(e)||null!==e&&"object"===i(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function N(e){return Promise.resolve().then(function(){var t;if("function"==typeof e){if(!T(t=e()))throw new p("instance of Promise","promiseFn",t)}else{if(!T(e))throw new u("promiseFn",["Function","Promise"],e);t=e}return Promise.resolve().then(function(){return t}).then(function(){return j}).catch(function(e){return e})})}function R(e,t,r,n){if("string"==typeof r){if(4==arguments.length)throw new u("error",["Object","Error","Function","RegExp"],r);if("object"===i(t)&&null!==t){if(t.message===r)throw new c("error/message",'The error message "'.concat(t.message,'" is identical to the message.'))}else if(t===r)throw new c("error/message",'The error "'.concat(t,'" is identical to the message.'));n=r,r=void 0}else if(null!=r&&"object"!==i(r)&&"function"!=typeof r)throw new u("error",["Object","Error","Function","RegExp"],r);if(t===j){var o="";r&&r.name&&(o+=" (".concat(r.name,")")),o+=n?": ".concat(n):".";var a="rejects"===e.name?"rejection":"exception";A({actual:void 0,expected:r,operator:e.name,message:"Missing expected ".concat(a).concat(o),stackStartFn:e})}if(r&&!C(t,r,n,e))throw t}function D(e,t,r,n){if(t!==j){if("string"==typeof r&&(n=r,r=void 0),!r||C(t,r)){var o=n?": ".concat(n):".",i="doesNotReject"===e.name?"rejection":"exception";A({actual:t,expected:r,operator:e.name,message:"Got unwanted ".concat(i).concat(o,"\n")+'Actual message: "'.concat(t&&t.message,'"'),stackStartFn:e})}throw t}}E.throws=function e(t){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];R.apply(void 0,[e,I(t)].concat(n))},E.rejects=function e(t){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return N(t).then(function(t){return R.apply(void 0,[e,t].concat(n))})},E.doesNotThrow=function e(t){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];D.apply(void 0,[e,I(t)].concat(n))},E.doesNotReject=function e(t){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return N(t).then(function(t){return D.apply(void 0,[e,t].concat(n))})},E.ifError=function e(t){if(null!=t){var r="ifError got unwanted exception: ";"object"===i(t)&&"string"==typeof t.message?0===t.message.length&&t.constructor?r+=t.constructor.name:r+=t.message:r+=y(t);var n=new h({actual:t,expected:null,operator:"ifError",message:r,stackStartFn:e}),o=t.stack;if("string"==typeof o){var a=o.split("\n");a.shift();for(var s=n.stack.split("\n"),l=0;l<a.length;l++){var c=s.indexOf(a[l]);if(-1!==c){s=s.slice(0,c);break}}n.stack="".concat(s.join("\n"),"\n").concat(a.join("\n"))}throw n}},E.strict=x(function e(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];O.apply(void 0,[e,r.length].concat(r))},E,{equal:E.strictEqual,deepEqual:E.deepStrictEqual,notEqual:E.notStrictEqual,notDeepEqual:E.notDeepStrictEqual}),E.strict.strict=E.strict},320:(e,t,r)=>{"use strict";var n=r(406);function o(e,t){return t&&("object"===u(t)||"function"==typeof t)?t:i(e)}function i(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){var t="function"==typeof Map?new Map:void 0;return(a=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return s(e,arguments,c(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,e)})(e)}function s(e,t,r){return(s=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&l(o,r.prototype),o}:Reflect.construct).apply(null,arguments)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=r(335).inspect,p=r(515).codes.ERR_INVALID_ARG_TYPE;function d(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}var h="",y="",m="",g="",b={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function x(e){var t=Object.keys(e),r=Object.create(Object.getPrototypeOf(e));return t.forEach(function(t){r[t]=e[t]}),Object.defineProperty(r,"message",{value:e.message}),r}function v(e){return f(e,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var S=function(e){var t;function r(e){if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,r),"object"!==u(e)||null===e)throw new p("options","Object",e);var t,a=e.message,s=e.operator,l=e.stackStartFn,f=e.actual,S=e.expected,w=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=a)t=o(this,c(r).call(this,String(a)));else if(n.stderr&&n.stderr.isTTY&&(n.stderr&&n.stderr.getColorDepth&&1!==n.stderr.getColorDepth()?(h="\x1b[34m",y="\x1b[32m",g="\x1b[39m",m="\x1b[31m"):(h="",y="",g="",m="")),"object"===u(f)&&null!==f&&"object"===u(S)&&null!==S&&"stack"in f&&f instanceof Error&&"stack"in S&&S instanceof Error&&(f=x(f),S=x(S)),"deepStrictEqual"===s||"strictEqual"===s)t=o(this,c(r).call(this,function(e,t,r){var o="",i="",a=0,s="",l=!1,c=v(e),f=c.split("\n"),p=v(t).split("\n"),x=0,S="";if("strictEqual"===r&&"object"===u(e)&&"object"===u(t)&&null!==e&&null!==t&&(r="strictEqualObject"),1===f.length&&1===p.length&&f[0]!==p[0]){var w=f[0].length+p[0].length;if(w<=10){if(!("object"===u(e)&&null!==e||"object"===u(t)&&null!==t||0===e&&0===t))return"".concat(b[r],"\n\n")+"".concat(f[0]," !== ").concat(p[0],"\n")}else if("strictEqualObject"!==r&&w<(n.stderr&&n.stderr.isTTY?n.stderr.columns:80)){for(;f[0][x]===p[0][x];)x++;x>2&&(S="\n  ".concat(function(e,t){if(t=Math.floor(t),0==e.length||0==t)return"";var r=e.length*t;for(t=Math.floor(Math.log(t)/Math.log(2));t;)e+=e,t--;return e+e.substring(0,r-e.length)}(" ",x),"^"),x=0)}}for(var E=f[f.length-1],j=p[p.length-1];E===j&&(x++<2?s="\n  ".concat(E).concat(s):o=E,f.pop(),p.pop(),0!==f.length&&0!==p.length);)E=f[f.length-1],j=p[p.length-1];var A=Math.max(f.length,p.length);if(0===A){var O=c.split("\n");if(O.length>30)for(O[26]="".concat(h,"...").concat(g);O.length>27;)O.pop();return"".concat(b.notIdentical,"\n\n").concat(O.join("\n"),"\n")}x>3&&(s="\n".concat(h,"...").concat(g).concat(s),l=!0),""!==o&&(s="\n  ".concat(o).concat(s),o="");var P=0,k=b[r]+"\n".concat(y,"+ actual").concat(g," ").concat(m,"- expected").concat(g),C=" ".concat(h,"...").concat(g," Lines skipped");for(x=0;x<A;x++){var I=x-a;if(f.length<x+1)I>1&&x>2&&(I>4?(i+="\n".concat(h,"...").concat(g),l=!0):I>3&&(i+="\n  ".concat(p[x-2]),P++),i+="\n  ".concat(p[x-1]),P++),a=x,o+="\n".concat(m,"-").concat(g," ").concat(p[x]),P++;else if(p.length<x+1)I>1&&x>2&&(I>4?(i+="\n".concat(h,"...").concat(g),l=!0):I>3&&(i+="\n  ".concat(f[x-2]),P++),i+="\n  ".concat(f[x-1]),P++),a=x,i+="\n".concat(y,"+").concat(g," ").concat(f[x]),P++;else{var T=p[x],N=f[x],R=N!==T&&(!d(N,",")||N.slice(0,-1)!==T);R&&d(T,",")&&T.slice(0,-1)===N&&(R=!1,N+=","),R?(I>1&&x>2&&(I>4?(i+="\n".concat(h,"...").concat(g),l=!0):I>3&&(i+="\n  ".concat(f[x-2]),P++),i+="\n  ".concat(f[x-1]),P++),a=x,i+="\n".concat(y,"+").concat(g," ").concat(N),o+="\n".concat(m,"-").concat(g," ").concat(T),P+=2):(i+=o,o="",1!==I&&0!==x||(i+="\n  ".concat(N),P++))}if(P>20&&x<A-2)return"".concat(k).concat(C,"\n").concat(i,"\n").concat(h,"...").concat(g).concat(o,"\n")+"".concat(h,"...").concat(g)}return"".concat(k).concat(l?C:"","\n").concat(i).concat(o).concat(s).concat(S)}(f,S,s)));else if("notDeepStrictEqual"===s||"notStrictEqual"===s){var E=b[s],j=v(f).split("\n");if("notStrictEqual"===s&&"object"===u(f)&&null!==f&&(E=b.notStrictEqualObject),j.length>30)for(j[26]="".concat(h,"...").concat(g);j.length>27;)j.pop();t=1===j.length?o(this,c(r).call(this,"".concat(E," ").concat(j[0]))):o(this,c(r).call(this,"".concat(E,"\n\n").concat(j.join("\n"),"\n")))}else{var A=v(f),O="",P=b[s];"notDeepEqual"===s||"notEqual"===s?(A="".concat(b[s],"\n\n").concat(A)).length>1024&&(A="".concat(A.slice(0,1021),"...")):(O="".concat(v(S)),A.length>512&&(A="".concat(A.slice(0,509),"...")),O.length>512&&(O="".concat(O.slice(0,509),"...")),"deepEqual"===s||"equal"===s?A="".concat(P,"\n\n").concat(A,"\n\nshould equal\n\n"):O=" ".concat(s," ").concat(O)),t=o(this,c(r).call(this,"".concat(A).concat(O)))}return Error.stackTraceLimit=w,t.generatedMessage=!a,Object.defineProperty(i(t),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),t.code="ERR_ASSERTION",t.actual=f,t.expected=S,t.operator=s,Error.captureStackTrace&&Error.captureStackTrace(i(t),l),t.stack,t.name="AssertionError",o(t)}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(r,e),t=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:f.custom,value:function(e,t){return f(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n,o;n=e,o=r[t],t in n?Object.defineProperty(n,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[t]=o})}return e}({},t,{customInspect:!1,depth:0}))}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(r.prototype,t),r}(a(Error));e.exports=S},515:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a,s,l={};function c(e,t,r){r||(r=Error);var a=function(r){function a(r,i,s){var l,c;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,a),(l=(c=o(a).call(this,"string"==typeof t?t:t(r,i,s)))&&("object"===n(c)||"function"==typeof c)?c:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this)).code=e,l}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(a,r),a}(r);l[e]=a}function u(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(e){return String(e)}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}c("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),c("ERR_INVALID_ARG_TYPE",function(e,t,o){if(void 0===a&&(a=r(696)),a("string"==typeof e,"'name' must be a string"),"string"==typeof t&&(s="not ",t.substr(0,s.length)===s)?(i="must not be",t=t.replace(/^not /,"")):i="must be",f=" argument",(void 0===p||p>e.length)&&(p=e.length),e.substring(p-f.length,p)===f)l="The ".concat(e," ").concat(i," ").concat(u(t,"type"));else{var i,s,l,c,f,p,d=("number"!=typeof c&&(c=0),c+1>e.length||-1===e.indexOf(".",c)?"argument":"property");l='The "'.concat(e,'" ').concat(d," ").concat(i," ").concat(u(t,"type"))}return l+". Received type ".concat(n(o))},TypeError),c("ERR_INVALID_ARG_VALUE",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===s&&(s=r(335));var o=s.inspect(t);return o.length>128&&(o="".concat(o.slice(0,128),"...")),"The argument '".concat(e,"' ").concat(n,". Received ").concat(o)},TypeError,RangeError),c("ERR_INVALID_RETURN_VALUE",function(e,t,r){var o;return o=r&&r.constructor&&r.constructor.name?"instance of ".concat(r.constructor.name):"type ".concat(n(r)),"Expected ".concat(e,' to be returned from the "').concat(t,'"')+" function but got ".concat(o,".")},TypeError),c("ERR_MISSING_ARGS",function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];void 0===a&&(a=r(696)),a(t.length>0,"At least one arg needs to be specified");var o="The ",i=t.length;switch(t=t.map(function(e){return'"'.concat(e,'"')}),i){case 1:o+="".concat(t[0]," argument");break;case 2:o+="".concat(t[0]," and ").concat(t[1]," arguments");break;default:o+=t.slice(0,i-1).join(", ")+", and ".concat(t[i-1]," arguments")}return"".concat(o," must be specified")},TypeError),e.exports.codes=l},796:(e,t,r)=>{"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=void 0!==/a/g.flags,a=function(e){var t=[];return e.forEach(function(e){return t.push(e)}),t},s=function(e){var t=[];return e.forEach(function(e,r){return t.push([r,e])}),t},l=Object.is?Object.is:r(512),c=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},u=Number.isNaN?Number.isNaN:r(782);function f(e){return e.call.bind(e)}var p=f(Object.prototype.hasOwnProperty),d=f(Object.prototype.propertyIsEnumerable),h=f(Object.prototype.toString),y=r(335).types,m=y.isAnyArrayBuffer,g=y.isArrayBufferView,b=y.isDate,x=y.isMap,v=y.isRegExp,S=y.isSet,w=y.isNativeError,E=y.isBoxedPrimitive,j=y.isNumberObject,A=y.isStringObject,O=y.isBooleanObject,P=y.isBigIntObject,k=y.isSymbolObject,C=y.isFloat32Array,I=y.isFloat64Array;function T(e){if(0===e.length||e.length>10)return!0;for(var t=0;t<e.length;t++){var r=e.charCodeAt(t);if(r<48||r>57)return!0}return 10===e.length&&e>=4294967296}function N(e){return Object.keys(e).filter(T).concat(c(e).filter(Object.prototype.propertyIsEnumerable.bind(e)))}function R(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0}function D(e,t,r,n){if(e===t)return 0!==e||!r||l(e,t);if(r){if("object"!==o(e))return"number"==typeof e&&u(e)&&u(t);if("object"!==o(t)||null===e||null===t||Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1}else{if(null===e||"object"!==o(e))return(null===t||"object"!==o(t))&&e==t;if(null===t||"object"!==o(t))return!1}var a=h(e);if(a!==h(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;var s=N(e),c=N(t);return s.length===c.length&&F(e,t,r,n,1,s)}if("[object Object]"===a&&(!x(e)&&x(t)||!S(e)&&S(t)))return!1;if(b(e)){if(!b(t)||Date.prototype.getTime.call(e)!==Date.prototype.getTime.call(t))return!1}else if(v(e)){if(!v(t)||!(i?e.source===t.source&&e.flags===t.flags:RegExp.prototype.toString.call(e)===RegExp.prototype.toString.call(t)))return!1}else if(w(e)||e instanceof Error){if(e.message!==t.message||e.name!==t.name)return!1}else{if(g(e)){if(!r&&(C(e)||I(e))){if(!function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e,t))return!1}else if(e.byteLength!==t.byteLength||0!==R(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength)))return!1;var f=N(e),p=N(t);return f.length===p.length&&F(e,t,r,n,0,f)}if(S(e))return!(!S(t)||e.size!==t.size)&&F(e,t,r,n,2);if(x(e))return!(!x(t)||e.size!==t.size)&&F(e,t,r,n,3);if(m(e)){if(e.byteLength!==t.byteLength||0!==R(new Uint8Array(e),new Uint8Array(t)))return!1}else if(E(e)&&(j(e)?!(j(t)&&l(Number.prototype.valueOf.call(e),Number.prototype.valueOf.call(t))):A(e)?!A(t)||String.prototype.valueOf.call(e)!==String.prototype.valueOf.call(t):O(e)?!O(t)||Boolean.prototype.valueOf.call(e)!==Boolean.prototype.valueOf.call(t):P(e)?!P(t)||BigInt.prototype.valueOf.call(e)!==BigInt.prototype.valueOf.call(t):!k(t)||Symbol.prototype.valueOf.call(e)!==Symbol.prototype.valueOf.call(t)))return!1}return F(e,t,r,n,0)}function M(e,t){return t.filter(function(t){return d(e,t)})}function F(e,t,r,i,l,u){if(5==arguments.length){u=Object.keys(e);var f=Object.keys(t);if(u.length!==f.length)return!1}for(var h=0;h<u.length;h++)if(!p(t,u[h]))return!1;if(r&&5==arguments.length){var y=c(e);if(0!==y.length){var m=0;for(h=0;h<y.length;h++){var g=y[h];if(d(e,g)){if(!d(t,g))return!1;u.push(g),m++}else if(d(t,g))return!1}var b=c(t);if(y.length!==b.length&&M(t,b).length!==m)return!1}else{var x=c(t);if(0!==x.length&&0!==M(t,x).length)return!1}}if(0===u.length&&(0===l||1===l&&0===e.length||0===e.size))return!0;if(void 0===i)i={val1:new Map,val2:new Map,position:0};else{var v=i.val1.get(e);if(void 0!==v){var S=i.val2.get(t);if(void 0!==S)return v===S}i.position++}i.val1.set(e,i.position),i.val2.set(t,i.position);var w=function(e,t,r,i,l,c){var u=0;if(2===c){if(!function(e,t,r,n){for(var i=null,s=a(e),l=0;l<s.length;l++){var c=s[l];if("object"===o(c)&&null!==c)null===i&&(i=new Set),i.add(c);else if(!t.has(c)){if(r||!function(e,t,r){var n=B(r);return null!=n?n:t.has(n)&&!e.has(n)}(e,t,c))return!1;null===i&&(i=new Set),i.add(c)}}if(null!==i){for(var u=a(t),f=0;f<u.length;f++){var p=u[f];if("object"===o(p)&&null!==p){if(!_(i,p,r,n))return!1}else if(!r&&!e.has(p)&&!_(i,p,r,n))return!1}return 0===i.size}return!0}(e,t,r,l))return!1}else if(3===c){if(!function(e,t,r,i){for(var a=null,l=s(e),c=0;c<l.length;c++){var u=n(l[c],2),f=u[0],p=u[1];if("object"===o(f)&&null!==f)null===a&&(a=new Set),a.add(f);else{var d=t.get(f);if(void 0===d&&!t.has(f)||!D(p,d,r,i)){if(r||!function(e,t,r,n,o){var i=B(r);if(null!=i)return i;var a=t.get(i);return!(void 0===a&&!t.has(i)||!D(n,a,!1,o))&&!e.has(i)&&D(n,a,!1,o)}(e,t,f,p,i))return!1;null===a&&(a=new Set),a.add(f)}}}if(null!==a){for(var h=s(t),y=0;y<h.length;y++){var m=n(h[y],2),g=(f=m[0],m[1]);if("object"===o(f)&&null!==f){if(!Z(a,e,f,g,r,i))return!1}else if(!(r||e.has(f)&&D(e.get(f),g,!1,i)||Z(a,e,f,g,!1,i)))return!1}return 0===a.size}return!0}(e,t,r,l))return!1}else if(1===c)for(;u<e.length;u++){if(!p(e,u)){if(p(t,u))return!1;for(var f=Object.keys(e);u<f.length;u++){var d=f[u];if(!p(t,d)||!D(e[d],t[d],r,l))return!1}return f.length===Object.keys(t).length}if(!p(t,u)||!D(e[u],t[u],r,l))return!1}for(u=0;u<i.length;u++){var h=i[u];if(!D(e[h],t[h],r,l))return!1}return!0}(e,t,r,u,i,l);return i.val1.delete(e),i.val2.delete(t),w}function _(e,t,r,n){for(var o=a(e),i=0;i<o.length;i++){var s=o[i];if(D(t,s,r,n))return e.delete(s),!0}return!1}function B(e){switch(o(e)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":e=+e;case"number":if(u(e))return!1}return!0}function Z(e,t,r,n,o,i){for(var s=a(e),l=0;l<s.length;l++){var c=s[l];if(D(r,c,o,i)&&D(n,t.get(c),o,i))return e.delete(c),!0}return!1}e.exports={isDeepEqual:function(e,t){return D(e,t,!1)},isDeepStrictEqual:function(e,t){return D(e,t,!0)}}},680:(e,t,r)=>{"use strict";var n=r(286),o=r(429),i=o(n("String.prototype.indexOf"));e.exports=function(e,t){var r=n(e,!!t);return"function"==typeof r&&i(e,".prototype.")>-1?o(r):r}},429:(e,t,r)=>{"use strict";var n=r(90),o=r(286),i=o("%Function.prototype.apply%"),a=o("%Function.prototype.call%"),s=o("%Reflect.apply%",!0)||n.call(a,i),l=o("%Object.getOwnPropertyDescriptor%",!0),c=o("%Object.defineProperty%",!0),u=o("%Math.max%");if(c)try{c({},"a",{value:1})}catch(e){c=null}e.exports=function(e){var t=s(n,a,arguments);return l&&c&&l(t,"length").configurable&&c(t,"length",{value:1+u(0,e.length-(arguments.length-1))}),t};var f=function(){return s(n,i,arguments)};c?c(e.exports,"apply",{value:f}):e.exports.apply=f},716:(e,t,r)=>{var n=r(335),o=r(696);function i(){return(new Date).getTime()}var a,s=Array.prototype.slice,l={};a=void 0!==r.g&&r.g.console?r.g.console:"undefined"!=typeof window&&window.console?window.console:{};for(var c=[[function(){},"log"],[function(){a.log.apply(a,arguments)},"info"],[function(){a.log.apply(a,arguments)},"warn"],[function(){a.warn.apply(a,arguments)},"error"],[function(e){l[e]=i()},"time"],[function(e){var t=l[e];if(!t)throw Error("No such label: "+e);delete l[e];var r=i()-t;a.log(e+": "+r+"ms")},"timeEnd"],[function(){var e=Error();e.name="Trace",e.message=n.format.apply(null,arguments),a.error(e.stack)},"trace"],[function(e){a.log(n.inspect(e)+"\n")},"dir"],[function(e){if(!e){var t=s.call(arguments,1);o.ok(!1,n.format.apply(null,t))}},"assert"]],u=0;u<c.length;u++){var f=c[u],p=f[0],d=f[1];a[d]||(a[d]=p)}e.exports=a},926:(e,t,r)=>{"use strict";var n=r(464),o="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),i=Object.prototype.toString,a=Array.prototype.concat,s=Object.defineProperty,l=r(181)(),c=s&&l,u=function(e,t,r,n){(!(t in e)||"function"==typeof n&&"[object Function]"===i.call(n)&&n())&&(c?s(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r)},f=function(e,t){var r=arguments.length>2?arguments[2]:{},i=n(t);o&&(i=a.call(i,Object.getOwnPropertySymbols(t)));for(var s=0;s<i.length;s+=1)u(e,i[s],t[i[s]],r[i[s]])};f.supportsDescriptors=!!c,e.exports=f},956:e=>{"use strict";function t(e,t){if(null==e)throw TypeError("Cannot convert first argument to object");for(var r=Object(e),n=1;n<arguments.length;n++){var o=arguments[n];if(null!=o)for(var i=Object.keys(Object(o)),a=0,s=i.length;a<s;a++){var l=i[a],c=Object.getOwnPropertyDescriptor(o,l);void 0!==c&&c.enumerable&&(r[l]=o[l])}}return r}e.exports={assign:t,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:t})}}},243:(e,t,r)=>{"use strict";var n=r(915),o=Object.prototype.toString,i=Object.prototype.hasOwnProperty,a=function(e,t,r){for(var n=0,o=e.length;n<o;n++)i.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))},s=function(e,t,r){for(var n=0,o=e.length;n<o;n++)null==r?t(e.charAt(n),n,e):t.call(r,e.charAt(n),n,e)},l=function(e,t,r){for(var n in e)i.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))};e.exports=function(e,t,r){var i;if(!n(t))throw TypeError("iterator must be a function");arguments.length>=3&&(i=r),"[object Array]"===o.call(e)?a(e,t,i):"string"==typeof e?s(e,t,i):l(e,t,i)}},795:e=>{"use strict";var t=Array.prototype.slice,r=Object.prototype.toString;e.exports=function(e){var n=this;if("function"!=typeof n||"[object Function]"!==r.call(n))throw TypeError("Function.prototype.bind called on incompatible "+n);for(var o,i=t.call(arguments,1),a=Math.max(0,n.length-i.length),s=[],l=0;l<a;l++)s.push("$"+l);if(o=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof o){var r=n.apply(this,i.concat(t.call(arguments)));return Object(r)===r?r:this}return n.apply(e,i.concat(t.call(arguments)))}),n.prototype){var c=function(){};c.prototype=n.prototype,o.prototype=new c,c.prototype=null}return o}},90:(e,t,r)=>{"use strict";var n=r(795);e.exports=Function.prototype.bind||n},286:(e,t,r)=>{"use strict";var n,o=SyntaxError,i=Function,a=TypeError,s=function(e){try{return i('"use strict"; return ('+e+").constructor;")()}catch(e){}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(e){l=null}var c=function(){throw new a},u=l?function(){try{return c}catch(e){try{return l(arguments,"callee").get}catch(e){return c}}}():c,f=r(636)(),p=Object.getPrototypeOf||function(e){return e.__proto__},d={},h="undefined"==typeof Uint8Array?n:p(Uint8Array),y={"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":f?p([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":d,"%AsyncGenerator%":d,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":d,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":d,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":f?p(p([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&f?p((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&f?p((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":f?p(""[Symbol.iterator]()):n,"%Symbol%":f?Symbol:n,"%SyntaxError%":o,"%ThrowTypeError%":u,"%TypedArray%":h,"%TypeError%":a,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet};try{null.error}catch(e){var m=p(p(e));y["%Error.prototype%"]=m}var g=function e(t){var r;if("%AsyncFunction%"===t)r=s("async function () {}");else if("%GeneratorFunction%"===t)r=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=s("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&(r=p(o.prototype))}return y[t]=r,r},b={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},x=r(90),v=r(198),S=x.call(Function.call,Array.prototype.concat),w=x.call(Function.apply,Array.prototype.splice),E=x.call(Function.call,String.prototype.replace),j=x.call(Function.call,String.prototype.slice),A=x.call(Function.call,RegExp.prototype.exec),O=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,P=/\\(\\)?/g,k=function(e){var t=j(e,0,1),r=j(e,-1);if("%"===t&&"%"!==r)throw new o("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new o("invalid intrinsic syntax, expected opening `%`");var n=[];return E(e,O,function(e,t,r,o){n[n.length]=r?E(o,P,"$1"):t||e}),n},C=function(e,t){var r,n=e;if(v(b,n)&&(n="%"+(r=b[n])[0]+"%"),v(y,n)){var i=y[n];if(i===d&&(i=g(n)),void 0===i&&!t)throw new a("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i}}throw new o("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new a('"allowMissing" argument must be a boolean');if(null===A(/^%?[^%]*%?$/,e))throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=k(e),n=r.length>0?r[0]:"",i=C("%"+n+"%",t),s=i.name,c=i.value,u=!1,f=i.alias;f&&(n=f[0],w(r,S([0,1],f)));for(var p=1,d=!0;p<r.length;p+=1){var h=r[p],m=j(h,0,1),g=j(h,-1);if(('"'===m||"'"===m||"`"===m||'"'===g||"'"===g||"`"===g)&&m!==g)throw new o("property names with quotes must have matching quotes");if("constructor"!==h&&d||(u=!0),v(y,s="%"+(n+="."+h)+"%"))c=y[s];else if(null!=c){if(!(h in c)){if(!t)throw new a("base intrinsic for "+e+" exists, but the property is not available.");return}if(l&&p+1>=r.length){var b=l(c,h);c=(d=!!b)&&"get"in b&&!("originalValue"in b.get)?b.get:c[h]}else d=v(c,h),c=c[h];d&&!u&&(y[s]=c)}}return c}},326:(e,t,r)=>{"use strict";var n=r(286)("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length")}catch(e){n=null}e.exports=n},181:(e,t,r)=>{"use strict";var n=r(286)("%Object.defineProperty%",!0),o=function(){if(n)try{return n({},"a",{value:1}),!0}catch(e){}return!1};o.hasArrayLengthDefineBug=function(){if(!o())return null;try{return 1!==n([],"length",{value:1}).length}catch(e){return!0}},e.exports=o},636:(e,t,r)=>{"use strict";var n="undefined"!=typeof Symbol&&Symbol,o=r(679);e.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==typeof n("foo")&&"symbol"==typeof Symbol("bar")&&o()}},679:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t||"[object Symbol]"!==Object.prototype.toString.call(t)||"[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},226:(e,t,r)=>{"use strict";var n=r(679);e.exports=function(){return n()&&!!Symbol.toStringTag}},198:(e,t,r)=>{"use strict";var n=r(90);e.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},285:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},635:(e,t,r)=>{"use strict";var n=r(226)(),o=r(680)("Object.prototype.toString"),i=function(e){return!(n&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===o(e)},a=function(e){return!!i(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==o(e)&&"[object Function]"===o(e.callee)},s=function(){return i(arguments)}();i.isLegacyArguments=a,e.exports=s?i:a},915:e=>{"use strict";var t,r,n=Function.prototype.toString,o="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof o&&"function"==typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw r}}),r={},o(function(){throw 42},null,t)}catch(e){e!==r&&(o=null)}else o=null;var i=/^\s*class\b/,a=function(e){try{var t=n.call(e);return i.test(t)}catch(e){return!1}},s=function(e){try{return!a(e)&&(n.call(e),!0)}catch(e){return!1}},l=Object.prototype.toString,c="function"==typeof Symbol&&!!Symbol.toStringTag,u=!(0 in[,]),f=function(){return!1};if("object"==typeof document){var p=document.all;l.call(p)===l.call(document.all)&&(f=function(e){if((u||!e)&&(void 0===e||"object"==typeof e))try{var t=l.call(e);return("[object HTMLAllCollection]"===t||"[object HTML document.all class]"===t||"[object HTMLCollection]"===t||"[object Object]"===t)&&null==e("")}catch(e){}return!1})}e.exports=o?function(e){if(f(e))return!0;if(!e||"function"!=typeof e&&"object"!=typeof e)return!1;try{o(e,null,t)}catch(e){if(e!==r)return!1}return!a(e)&&s(e)}:function(e){if(f(e))return!0;if(!e||"function"!=typeof e&&"object"!=typeof e)return!1;if(c)return s(e);if(a(e))return!1;var t=l.call(e);return!("[object Function]"!==t&&"[object GeneratorFunction]"!==t&&!/^\[object HTML/.test(t))&&s(e)}},138:(e,t,r)=>{"use strict";var n,o=Object.prototype.toString,i=Function.prototype.toString,a=/^\s*(?:function)?\*/,s=r(226)(),l=Object.getPrototypeOf;e.exports=function(e){if("function"!=typeof e)return!1;if(a.test(i.call(e)))return!0;if(!s)return"[object GeneratorFunction]"===o.call(e);if(!l)return!1;if(void 0===n){var t=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch(e){}}();n=!!t&&l(t)}return l(e)===n}},53:e=>{"use strict";e.exports=function(e){return e!=e}},782:(e,t,r)=>{"use strict";var n=r(429),o=r(926),i=r(53),a=r(755),s=r(346),l=n(a(),Number);o(l,{getPolyfill:a,implementation:i,shim:s}),e.exports=l},755:(e,t,r)=>{"use strict";var n=r(53);e.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:n}},346:(e,t,r)=>{"use strict";var n=r(926),o=r(755);e.exports=function(){var e=o();return n(Number,{isNaN:e},{isNaN:function(){return Number.isNaN!==e}}),e}},21:(e,t,r)=>{"use strict";var n=r(243),o=r(191),i=r(680),a=i("Object.prototype.toString"),s=r(226)(),l=r(326),c="undefined"==typeof globalThis?r.g:globalThis,u=o(),f=i("Array.prototype.indexOf",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return -1},p=i("String.prototype.slice"),d={},h=Object.getPrototypeOf;s&&l&&h&&n(u,function(e){var t=new c[e];if(Symbol.toStringTag in t){var r=h(t),n=l(r,Symbol.toStringTag);n||(n=l(h(r),Symbol.toStringTag)),d[e]=n.get}}),e.exports=function(e){var t;return!!e&&"object"==typeof e&&(s&&Symbol.toStringTag in e?!!l&&(t=!1,n(d,function(r,n){if(!t)try{t=r.call(e)===n}catch(e){}}),t):f(u,p(a(e),8,-1))>-1)}},169:e=>{"use strict";var t=function(e){return e!=e};e.exports=function(e,r){return 0===e&&0===r?1/e==1/r:e===r||!(!t(e)||!t(r))}},512:(e,t,r)=>{"use strict";var n=r(926),o=r(429),i=r(169),a=r(70),s=r(719),l=o(a(),Object);n(l,{getPolyfill:a,implementation:i,shim:s}),e.exports=l},70:(e,t,r)=>{"use strict";var n=r(169);e.exports=function(){return"function"==typeof Object.is?Object.is:n}},719:(e,t,r)=>{"use strict";var n=r(70),o=r(926);e.exports=function(){var e=n();return o(Object,{is:e},{is:function(){return Object.is!==e}}),e}},691:(e,t,r)=>{"use strict";var n;if(!Object.keys){var o=Object.prototype.hasOwnProperty,i=Object.prototype.toString,a=r(801),s=Object.prototype.propertyIsEnumerable,l=!s.call({toString:null},"toString"),c=s.call(function(){},"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(e){var t=e.constructor;return t&&t.prototype===e},p={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},d=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!p["$"+e]&&o.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{f(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();n=function(e){var t=null!==e&&"object"==typeof e,r="[object Function]"===i.call(e),n=a(e),s=t&&"[object String]"===i.call(e),p=[];if(!t&&!r&&!n)throw TypeError("Object.keys called on a non-object");var h=c&&r;if(s&&e.length>0&&!o.call(e,0))for(var y=0;y<e.length;++y)p.push(String(y));if(n&&e.length>0)for(var m=0;m<e.length;++m)p.push(String(m));else for(var g in e)h&&"prototype"===g||!o.call(e,g)||p.push(String(g));if(l)for(var b=function(e){if("undefined"==typeof window||!d)return f(e);try{return f(e)}catch(e){return!1}}(e),x=0;x<u.length;++x)b&&"constructor"===u[x]||!o.call(e,u[x])||p.push(u[x]);return p}}e.exports=n},464:(e,t,r)=>{"use strict";var n=Array.prototype.slice,o=r(801),i=Object.keys,a=i?function(e){return i(e)}:r(691),s=Object.keys;a.shim=function(){return Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return o(e)?s(n.call(e)):s(e)}):Object.keys=a,Object.keys||a},e.exports=a},801:e=>{"use strict";var t=Object.prototype.toString;e.exports=function(e){var r=t.call(e),n="[object Arguments]"===r;return n||(n="[object Array]"!==r&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),n}},938:(e,t)=>{t.bW="\n"},406:e=>{var t,r,n=e.exports={};function o(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var s,l=[],c=!1,u=-1;function f(){c&&s&&(c=!1,s.length?l=s.concat(l):u=-1,l.length&&p())}function p(){if(!c){var e=a(f);c=!0;for(var t=l.length;t;){for(s=l,l=[];++u<t;)s&&s[u].run();u=-1,t=l.length}s=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function h(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new d(e,t)),1!==l.length||c||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=h,n.addListener=h,n.once=h,n.off=h,n.removeListener=h,n.removeAllListeners=h,n.emit=h,n.prependListener=h,n.prependOnceListener=h,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}},82:e=>{e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},895:(e,t,r)=>{"use strict";var n=r(635),o=r(138),i=r(94),a=r(21);function s(e){return e.call.bind(e)}var l="undefined"!=typeof BigInt,c="undefined"!=typeof Symbol,u=s(Object.prototype.toString),f=s(Number.prototype.valueOf),p=s(String.prototype.valueOf),d=s(Boolean.prototype.valueOf);if(l)var h=s(BigInt.prototype.valueOf);if(c)var y=s(Symbol.prototype.valueOf);function m(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function g(e){return"[object Map]"===u(e)}function b(e){return"[object Set]"===u(e)}function x(e){return"[object WeakMap]"===u(e)}function v(e){return"[object WeakSet]"===u(e)}function S(e){return"[object ArrayBuffer]"===u(e)}function w(e){return"undefined"!=typeof ArrayBuffer&&(S.working?S(e):e instanceof ArrayBuffer)}function E(e){return"[object DataView]"===u(e)}function j(e){return"undefined"!=typeof DataView&&(E.working?E(e):e instanceof DataView)}t.isArgumentsObject=n,t.isGeneratorFunction=o,t.isTypedArray=a,t.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},t.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):a(e)||j(e)},t.isUint8Array=function(e){return"Uint8Array"===i(e)},t.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===i(e)},t.isUint16Array=function(e){return"Uint16Array"===i(e)},t.isUint32Array=function(e){return"Uint32Array"===i(e)},t.isInt8Array=function(e){return"Int8Array"===i(e)},t.isInt16Array=function(e){return"Int16Array"===i(e)},t.isInt32Array=function(e){return"Int32Array"===i(e)},t.isFloat32Array=function(e){return"Float32Array"===i(e)},t.isFloat64Array=function(e){return"Float64Array"===i(e)},t.isBigInt64Array=function(e){return"BigInt64Array"===i(e)},t.isBigUint64Array=function(e){return"BigUint64Array"===i(e)},g.working="undefined"!=typeof Map&&g(new Map),t.isMap=function(e){return"undefined"!=typeof Map&&(g.working?g(e):e instanceof Map)},b.working="undefined"!=typeof Set&&b(new Set),t.isSet=function(e){return"undefined"!=typeof Set&&(b.working?b(e):e instanceof Set)},x.working="undefined"!=typeof WeakMap&&x(new WeakMap),t.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(x.working?x(e):e instanceof WeakMap)},v.working="undefined"!=typeof WeakSet&&v(new WeakSet),t.isWeakSet=function(e){return v(e)},S.working="undefined"!=typeof ArrayBuffer&&S(new ArrayBuffer),t.isArrayBuffer=w,E.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&E(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=j;var A="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function O(e){return"[object SharedArrayBuffer]"===u(e)}function P(e){return void 0!==A&&(void 0===O.working&&(O.working=O(new A)),O.working?O(e):e instanceof A)}function k(e){return m(e,f)}function C(e){return m(e,p)}function I(e){return m(e,d)}function T(e){return l&&m(e,h)}function N(e){return c&&m(e,y)}t.isSharedArrayBuffer=P,t.isAsyncFunction=function(e){return"[object AsyncFunction]"===u(e)},t.isMapIterator=function(e){return"[object Map Iterator]"===u(e)},t.isSetIterator=function(e){return"[object Set Iterator]"===u(e)},t.isGeneratorObject=function(e){return"[object Generator]"===u(e)},t.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===u(e)},t.isNumberObject=k,t.isStringObject=C,t.isBooleanObject=I,t.isBigIntObject=T,t.isSymbolObject=N,t.isBoxedPrimitive=function(e){return k(e)||C(e)||I(e)||T(e)||N(e)},t.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(w(e)||P(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw Error(e+" is not supported in userland")}})})},335:(e,t,r)=>{var n=r(406),o=r(716),i=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},a=/%[sdj%]/g;t.format=function(e){if(!v(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(u(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,o=n.length,i=String(e).replace(a,function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),s=n[r];r<o;s=n[++r])b(s)||!E(s)?i+=" "+s:i+=" "+u(s);return i},t.deprecate=function(e,r){if(void 0!==n&&!0===n.noDeprecation)return e;if(void 0===n)return function(){return t.deprecate(e,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(n.throwDeprecation)throw Error(r);n.traceDeprecation?o.trace(r):o.error(r),i=!0}return e.apply(this,arguments)}};var s={},l=/^$/;if(n.env.NODE_DEBUG){var c=n.env.NODE_DEBUG;l=RegExp("^"+(c=c.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase())+"$","i")}function u(e,r){var n={seen:[],stylize:p};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),g(r)?n.showHidden=r:r&&t._extend(n,r),S(n.showHidden)&&(n.showHidden=!1),S(n.depth)&&(n.depth=2),S(n.colors)&&(n.colors=!1),S(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=f),d(n,e,n.depth)}function f(e,t){var r=u.styles[t];return r?"\x1b["+u.colors[r][0]+"m"+e+"\x1b["+u.colors[r][1]+"m":e}function p(e,t){return e}function d(e,r,n){if(e.customInspect&&r&&O(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o,i,a=r.inspect(n,e);return v(a)||(a=d(e,a,n)),a}var s=function(e,t){if(S(t))return e.stylize("undefined","undefined");if(v(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return x(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):b(t)?e.stylize("null","null"):void 0}(e,r);if(s)return s;var l=Object.keys(r),c=(f={},l.forEach(function(e,t){f[e]=!0}),f);if(e.showHidden&&(l=Object.getOwnPropertyNames(r)),A(r)&&(l.indexOf("message")>=0||l.indexOf("description")>=0))return h(r);if(0===l.length){if(O(r)){var u=r.name?": "+r.name:"";return e.stylize("[Function"+u+"]","special")}if(w(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(j(r))return e.stylize(Date.prototype.toString.call(r),"date");if(A(r))return h(r)}var f,p,E="",P=!1,k=["{","}"];return m(r)&&(P=!0,k=["[","]"]),O(r)&&(E=" [Function"+(r.name?": "+r.name:"")+"]"),w(r)&&(E=" "+RegExp.prototype.toString.call(r)),j(r)&&(E=" "+Date.prototype.toUTCString.call(r)),A(r)&&(E=" "+h(r)),0!==l.length||P&&0!=r.length?n<0?w(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),p=P?function(e,t,r,n,o){for(var i=[],a=0,s=t.length;a<s;++a)I(t,String(a))?i.push(y(e,t,r,n,String(a),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(y(e,t,r,n,o,!0))}),i}(e,r,n,c,l):l.map(function(t){return y(e,r,n,c,t,P)}),e.seen.pop(),o=E,i=k,p.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?i[0]+(""===o?"":o+"\n ")+" "+p.join(",\n  ")+" "+i[1]:i[0]+o+" "+p.join(", ")+" "+i[1]):k[0]+E+k[1]}function h(e){return"["+Error.prototype.toString.call(e)+"]"}function y(e,t,r,n,o,i){var a,s,l;if((l=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),I(n,o)||(a="["+o+"]"),s||(0>e.seen.indexOf(l.value)?(s=b(r)?d(e,l.value,null):d(e,l.value,r-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map(function(e){return"  "+e}).join("\n").slice(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),S(a)){if(i&&o.match(/^\d+$/))return s;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.slice(1,-1),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function m(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function b(e){return null===e}function x(e){return"number"==typeof e}function v(e){return"string"==typeof e}function S(e){return void 0===e}function w(e){return E(e)&&"[object RegExp]"===P(e)}function E(e){return"object"==typeof e&&null!==e}function j(e){return E(e)&&"[object Date]"===P(e)}function A(e){return E(e)&&("[object Error]"===P(e)||e instanceof Error)}function O(e){return"function"==typeof e}function P(e){return Object.prototype.toString.call(e)}function k(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(!s[e=e.toUpperCase()]){if(l.test(e)){var r=n.pid;s[e]=function(){var n=t.format.apply(t,arguments);o.error("%s %d: %s",e,r,n)}}else s[e]=function(){}}return s[e]},t.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=r(895),t.isArray=m,t.isBoolean=g,t.isNull=b,t.isNullOrUndefined=function(e){return null==e},t.isNumber=x,t.isString=v,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=S,t.isRegExp=w,t.types.isRegExp=w,t.isObject=E,t.isDate=j,t.types.isDate=j,t.isError=A,t.types.isNativeError=A,t.isFunction=O,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(82);var C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,r;o.log("%s - %s",(r=[k((e=new Date).getHours()),k(e.getMinutes()),k(e.getSeconds())].join(":"),[e.getDate(),C[e.getMonth()],r].join(" ")),t.format.apply(t,arguments))},t.inherits=r(285),t._extend=function(e,t){if(!t||!E(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var T="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function N(e,t){if(!e){var r=Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw TypeError('The "original" argument must be of type Function');if(T&&e[T]){var t;if("function"!=typeof(t=e[T]))throw TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise(function(e,n){t=e,r=n}),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push(function(e,n){e?r(e):t(n)});try{e.apply(this,o)}catch(e){r(e)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),T&&Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,i(e))},t.promisify.custom=T,t.callbackify=function(e){if("function"!=typeof e)throw TypeError('The "original" argument must be of type Function');function t(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);var o=t.pop();if("function"!=typeof o)throw TypeError("The last argument must be of type Function");var i=this,a=function(){return o.apply(i,arguments)};e.apply(this,t).then(function(e){n.nextTick(a.bind(null,null,e))},function(e){n.nextTick(N.bind(null,e,a))})}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,i(e)),t}},94:(e,t,r)=>{"use strict";var n=r(243),o=r(191),i=r(680),a=r(326),s=i("Object.prototype.toString"),l=r(226)(),c="undefined"==typeof globalThis?r.g:globalThis,u=o(),f=i("String.prototype.slice"),p={},d=Object.getPrototypeOf;l&&a&&d&&n(u,function(e){if("function"==typeof c[e]){var t=new c[e];if(Symbol.toStringTag in t){var r=d(t),n=a(r,Symbol.toStringTag);n||(n=a(d(r),Symbol.toStringTag)),p[e]=n.get}}});var h=r(21);e.exports=function(e){var t;return!!h(e)&&(l&&Symbol.toStringTag in e?(t=!1,n(p,function(r,n){if(!t)try{var o=r.call(e);o===n&&(t=o)}catch(e){}}),t):f(s(e),8,-1))}},191:(e,t,r)=>{"use strict";var n=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],o="undefined"==typeof globalThis?r.g:globalThis;e.exports=function(){for(var e=[],t=0;t<n.length;t++)"function"==typeof o[n[t]]&&(e[e.length]=n[t]);return e}},581:function(e){"undefined"!=typeof self&&self,e.exports=(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{HashMap:()=>l,HashSet:()=>c,HashedCollection:()=>a});class r{constructor(e){this.item=e}next(){return this.value=this.item,this.done=!this.item,this.item=this.item?this.item.next:void 0,this}}class n{prepend(e){var t=this.list;if(!(e&&e.append&&e.prepend&&e.detach))throw Error("An argument without append, prepend, or detach methods was given to `Item#prepend`.");return!(!t||this===e)&&(e.detach(),this.prev&&(e.prev=this.prev,this.prev.next=e),e.next=this,e.list=t,this.prev=e,this===t.head&&(t.head=e),t.tail||(t.tail=this),t.size++,e)}append(e){var t=this.list;if(!(e&&e.append&&e.prepend&&e.detach))throw Error("An argument without append, prepend, or detach methods was given to `Item#append`.");return!(!t||this===e)&&(e.detach(),this.next&&(e.next=this.next,this.next.prev=e),e.prev=this,e.list=t,this.next=e,this!==t.tail&&t.tail||(t.tail=e),t.size++,e)}detach(){var e=this.list;return e&&(e.tail===this&&(e.tail=this.prev),e.head===this&&(e.head=this.next),e.tail===e.head&&(e.tail=null),this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=this.next=this.list=null,e.size--),this}}n.prototype.next=n.prototype.prev=n.prototype.list=null;class o{static of(...e){return i(new this,e)}static from(e){return i(new this,e)}constructor(...e){i(this,e)}toArray(){for(var e=this.head,t=[];e;)t.push(e),e=e.next;return t}prepend(e){if(!e)return!1;if(!e.append||!e.prepend||!e.detach)throw Error("An argument without append, prepend, or detach methods was given to `List#prepend`.");return this.head?this.head.prepend(e):(e.detach(),e.list=this,this.head=e,this.size++,e)}append(e){if(!e)return!1;if(!e.append||!e.prepend||!e.detach)throw Error("An argument without append, prepend, or detach methods was given to `List#append`.");return this.tail?this.tail.append(e):this.head?this.head.append(e):(e.detach(),e.list=this,this.head=e,this.size++,e)}[Symbol.iterator](){return new r(this.head)}}function i(e,t){var r,n,o;if(!t)return e;if(t[Symbol.iterator])for(o=t[Symbol.iterator](),n={};!n.done;)n=o.next(),e.append(n&&n.value);else for(r=-1;++r<t.length;)e.append(t[r]);return e}o.prototype.size=0,o.prototype.tail=o.prototype.head=null;class a extends Object{tally=0;constructor(){super()}}class s extends n{key;value;constructor(e,t){super(),this.key=e,this.value=t}getKey(){return this.key}getValue(){return this.value}getItem(){return[this.key,this.value]}}class l extends a{aMap;constructor(...e){super(),this.aMap=new Map,this.addAll(...e)}add(e){let[t,r]=e,n=t.hash();return this.aMap.has(n)?this.aMap.get(n)?.append(new s(t,r)):this.aMap.set(n,new o(new s(t,r))),this.tally+=1,this}addAll(...e){return e.forEach(e=>{this.add(e)}),this}clear(){this.aMap.clear(),this.tally=0}forEach(e){let t=this.entries(),r=t.next();for(;void 0!==r.done&&!r.done;){let[n,o]=r.value;e(o,n,this),r=t.next()}}entries(){return this.makeIterator((e,t)=>[e,t])}equals(e){if(null==e||!(e instanceof l)||this.size()!==e.size()||e.hash()!==this.hash())return!1;for(let[t,r]of this.entries()){let n=e.get(t);if(null===n)return!1;if(void 0!==r.equals){if(!1===r.equals(n))return!1}else if(r!==n)return!1}return!0}delete(e){let t=this.search(e);if(null!=t){let r=t.list;return t.detach(),this.tally-=1,0===r.size&&this.aMap.delete(e.hash()),t.getValue()}return null}get(e){let t=this.search(e);return null!==t?t.getValue():null}has(e){return null!==this.search(e)}hash(){return 0===this.tally?0:Array.from(this.aMap.keys()).reduce((e,t)=>(e+t)%Number.MAX_SAFE_INTEGER)}keys(){return this.makeIterator(e=>e)}makeIterator(e){let t=this.aMap.values();return function*(){let r=t.next();for(;void 0!==r.done&&!r.done;){let n=r.value.head;for(;null!==n;){let[t,r]=n.getItem();yield e(t,r),n=n.next}r=t.next()}}()}search(e){let t=e.hash();if(this.aMap.has(t)){let r=this.aMap.get(t)?.head;for(;r;){let t=r.getKey();if(e.equals(t))return r;r=r.next}}return null}set(e,t){return this.add([e,t])}setDefault(e,t){return this.has(e)?null:(this.set(e,t),t)}size(){return this.tally}values(){return this.makeIterator((e,t)=>t)}toArray(){let e=[];return this.tally,Array.from(this.aMap.values()).forEach(t=>{let r=t.head;for(;r;)e.push(r.getItem()),r=r.next}),e}toString(){let e=this.toArray().map(([e,t])=>`${String(e)} => ${String(t)}`).join(", ");return`HashMap(${this.size()}) { ${e} }`}}class c extends a{aMap;constructor(...e){super(),this.aMap=new l,this.addAll(...e)}add(e){return this.has(e)||this.aMap.set(e,e),this}addAll(...e){return e.forEach(e=>{this.add(e)}),this}clear(){this.aMap.clear()}delete(e){return this.aMap.delete(e)}entries(){return this.aMap.entries()}equals(e){if(null==e||!(e instanceof c)||this.size()!==e.size()||e.hash()!==this.hash())return!1;for(let t of this.values())if(!e.has(t))return!1;return!0}forEach(e){let t=this.entries(),r=t.next();for(;void 0!==r.done&&!r.done;){let[n,o]=r.value;e(n,o,this),r=t.next()}}has(e){return this.aMap.has(e)}hash(){return this.aMap.hash()}keys(){return this.aMap.keys()}size(){return this.aMap.size()}values(){return this.keys()}toArray(){return this.aMap.toArray().map(e=>e[0])}toString(){let e=this.toArray().map(e=>String(e)).join(", ");return`HashSet(${this.size()}) { ${e} }`}}return t})()}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{"use strict";r.r(n),r.d(n,{AST:()=>A,SDElement:()=>I,SyntaxDiagram:()=>R});var e=r(938),t=r(581);class o extends Object{static stringToHash(e){let t=0;for(let r of e)t=(0|(t=31*t+r.charCodeAt(0)))%Number.MAX_SAFE_INTEGER;return t}}class i extends Object{}class a extends i{name;constructor(e){super(),this.name=e}getName(){return this.name}hash(){return o.stringToHash(this.name)%Number.MAX_SAFE_INTEGER}size(){return 1}}class s extends a{static Epsilon=new s("");constructor(e){super(e)}equals(e){return null!=e&&e instanceof s&&this.name===e.name}toString(){return""===this.name?"ε":this.name}}class l extends a{constructor(e){super(e)}equals(e){return null!=e&&e instanceof l&&this.hash()===e.hash()&&this.name===e.name}toString(){return`Node(${this.name})`}}class c extends i{child;constructor(e){super(),this.child=e}getChild(){return this.child}hash(){return this.child.hash()%Number.MAX_SAFE_INTEGER}size(){return this.child.size()+1}}class u extends c{maxRepeatCount;minRepeatCount;constructor(e,t=0,r=Number.POSITIVE_INFINITY){if(super(e),t<0||r<0||!Number.isInteger(t)||!Number.isInteger(r)&&r!==Number.POSITIVE_INFINITY)throw Error("繰り返しの回数は正の整数である必要があります");if(r<t)throw Error("繰り返しの最大回数が最小回数よりも大きい必要があります");this.minRepeatCount=t,this.maxRepeatCount=r}equals(e){return null!=e&&e instanceof u&&this.hash()===e.hash()&&this.maxRepeatCount===e.getMaxRepeatCount()&&this.minRepeatCount===e.getMinRepeatCount()&&this.child.equals(e.child)}getMaxRepeatCount(){return this.maxRepeatCount}getMinRepeatCount(){return this.minRepeatCount}hash(){let e=[];return e.push(this.minRepeatCount),this.maxRepeatCount===Number.POSITIVE_INFINITY?e.push(0):e.push(this.maxRepeatCount),e.push(super.hash()),e.reduce((e,t)=>(e+t)%Number.MAX_SAFE_INTEGER,0)}isOneOrMore(){return 1===this.minRepeatCount&&this.maxRepeatCount===Number.POSITIVE_INFINITY}isZeroOrMore(){return 0===this.minRepeatCount&&this.maxRepeatCount===Number.POSITIVE_INFINITY}isZeroOrOne(){return 0===this.minRepeatCount&&1===this.maxRepeatCount}toString(){return`Closure(${this.child.toString()}, {${this.minRepeatCount},${this.maxRepeatCount}})`}}class f extends u{constructor(e){super(e,0,1)}}class p extends i{car;cdr;constructor(e,t){super(),this.car=e,this.cdr=t}getCar(){return this.car}getCdr(){return this.cdr}hash(){return(this.car.hash()+this.cdr.hash())%Number.MAX_SAFE_INTEGER}size(){return this.car.size()+this.cdr.size()+1}}class d extends p{static fromArray(e){return(e=e.filter(e=>!e.equals(s.Epsilon))).length<=1?e.at(0)??s.Epsilon:e.reverse().reduce((e,t)=>new d(t,e))}constructor(e,t){super(e,t)}equals(e){if(null==e||!(e instanceof d)||this.hash()!==e.hash())return!1;let t=this.expand(),r=e.expand();return t.length===r.length&&t.every((e,t)=>e.equals(r.at(t)))}expand(){let e=[];return[this.car,this.cdr].forEach(t=>{t instanceof d?e=e.concat(t.expand()):e.push(t)}),e}toString(){return"Concat("+this.car.toString()+", "+this.cdr.toString()+")"}}class h extends p{static fromArray(e){return(e=Array.from(new t.HashSet(...e).values())).length<=1?e.at(0)??s.Epsilon:e.reduce((e,t)=>new h(t,e))}constructor(e,t){if(super(e,t),t instanceof d&&([e,t]=[t,e]),e instanceof h&&(this.car=e.getCar(),this.cdr=new h(e.getCdr(),t)),this.cdr instanceof h&&this.cdr.getCar() instanceof d&&!(this.car instanceof d)){let e=this.car;this.car=this.cdr.getCar(),this.cdr=new h(e,this.cdr.getCdr())}}equals(e){if(null==e||!(e instanceof h)||this.hash()!==e.hash())return!1;let r=new t.HashSet(...this.expand()),n=new t.HashSet(...e.expand());return r.equals(n)}expand(){let e=new t.HashSet,r=Array(this);for(;r.length>0;){let t=r.pop();void 0!==t&&[t.getCar(),t.getCdr()].forEach(t=>{t instanceof h?r.push(t):e.add(t)})}return e.toArray()}toString(){return"Alt("+this.car.toString()+", "+this.cdr.toString()+")"}}class y extends Object{anAST;constructor(e){super(),this.anAST=e}transformSymbol(e){if(e instanceof h)return this.transformAlternation(e);if(e instanceof d)return this.transformConcatenation(e);if(e instanceof u)return this.transformClosure(e);if(e instanceof s)return this.transformLeaf(e);if(e instanceof l)return this.transformNode(e);throw Error(`'${e.constructor.name}'は変換に対応していません`)}}class m extends y{static memoMap=new t.HashMap;static BIND=" ::= ";static OR_SEPARATOR="|";static ZERO_OR_MORE="*";static ONE_OR_MORE="+";static L_PER="(";static R_PER=")";static SPACE=" ";static QUOTATION="'";static DOUBLE_QUOTATION='"';static OPTIONAL="?";static END_OF_STATEMENT="";constructor(e){super(e)}transformAlternation(e){let t=e.expand(),r=t.map(e=>this.transformSymbol(e)).join(m.SPACE+m.OR_SEPARATOR+m.SPACE);return t.length>1&&(r=m.L_PER+r+m.R_PER),r}transformConcatenation(e){return e.expand().map(e=>this.transformSymbol(e)).join(m.SPACE)}transformClosure(e){let t=e.getChild(),r=this.transformSymbol(t),n=null;if(e.isZeroOrMore()?n=m.ZERO_OR_MORE:e.isZeroOrOne()?n=m.OPTIONAL:e.isOneOrMore()&&(n=m.ONE_OR_MORE),null===n){let r=e.getMinRepeatCount(),n=e.getMaxRepeatCount();return this.transformSymbol(d.fromArray(Array(r).fill(t).concat(Array(n-r).fill(new f(t)))))}return[s,l,h].some(e=>t instanceof e)||(r=m.L_PER+r+m.R_PER),r+n}transformLeaf(e){if(e.equals(s.Epsilon))return"";let t=e.getName(),r=t.includes(m.QUOTATION),n=t.includes(m.DOUBLE_QUOTATION),o=m.DOUBLE_QUOTATION;if(r&&n){let e=[],r=0;return Array.from(t).forEach((n,i)=>{n===o&&(e.push(new s(t.slice(r,i))),r=i,m.DOUBLE_QUOTATION,o=m.QUOTATION)}),e.push(new s(t.slice(r))),this.transformSymbol(d.fromArray(e))}return n&&(o=m.QUOTATION),o+e.getName()+o}transformNode(e){return e.getName()}transformSymbol(e){let t=m.memoMap.get(e);return null!==t||(t=super.transformSymbol(e),m.memoMap.set(e,t)),t}transform(){return this.anAST.getName()+m.BIND+this.transformSymbol(this.anAST.getRoot())+m.END_OF_STATEMENT}}class g extends u{constructor(e){super(e,0,Number.POSITIVE_INFINITY)}}var b=r(716);class x extends Object{isEnd=!1;next=new t.HashMap;constructor(){super()}addNext(e){let t=this.next.get(e);return null===t&&(t=new x,this.next.set(e,t)),t}getNext(){return this.next}}class v extends Object{root=new x;isSimplifySuffix;addCounter=0;constructor(e,t=!1){super(),this.isSimplifySuffix=t,this.add(e),this.prettyPrint()}transformClosureForSimplification(e){let t=e.getChild(),r=e.getMinRepeatCount(),n=e.getMaxRepeatCount();if(e.isZeroOrOne()||e.isZeroOrMore())return[e];let o=Array(r).fill(t);return n===Number.POSITIVE_INFINITY?o.push(new g(t)):o.push(...Array(n-r).fill(new f(t))),o}transformConcatenationForSimplification(e){let t=e.expand().flatMap(e=>e instanceof u?this.transformClosureForSimplification(e):[e]);return this.isSimplifySuffix&&t.reverse(),t}add(e){let t=this.root;if(e instanceof d)this.transformConcatenationForSimplification(e).forEach(e=>{t=t.addNext(e)});else{if(e instanceof h)return void e.expand().forEach(e=>{this.add(e)});if(e instanceof u){let r=d.fromArray(this.transformClosureForSimplification(e));if(!r.equals(e))return void this.add(r);t=t.addNext(r)}else t=t.addNext(e)}this.addCounter+=1,t.isEnd=!0}isSimplified(){return this.root.getNext().size()===this.addCounter}_prettyPrint(t,r,n){if(n.has(t))return"";let o="",i=Array(r).fill(" ").join("");return t.isEnd&&(o+=i+"<E>"+e.bW),t.getNext().forEach((t,a)=>{o+=i+a.toString()+e.bW+this._prettyPrint(t,r+4,n),n.add(t)}),o}prettyPrint(){b.log(this._prettyPrint(this.root,0,new Set))}_simplify(e){let t=[];return e.isEnd&&t.push(s.Epsilon),e.getNext().forEach((e,r)=>{this.isSimplifySuffix?t.push(d.fromArray([this._simplify(e),r])):t.push(d.fromArray([r,this._simplify(e)]))}),h.fromArray(t)}simplify(){return this._simplify(this.root)}}class S extends Object{static toOptionalIfIncludeEpsilon(e){let[t,r]=[e.getCar(),e.getCdr()];for(let[e,n]of[[t,r],[r,t]]){if(e.equals(s.Epsilon))return new f(n);if(e instanceof u&&e.isZeroOrOne())return new f(new h(e.getChild(),n))}return e}static omitAffix(e){let t=new v(e,!1);if(!t.isSimplified())return t.simplify();let r=new v(e,!0);return r.isSimplified()?e:r.simplify()}}class w extends Object{static margeClosure(e){let t=e.getChild();if(t instanceof u){let[r,n]=[e.getMinRepeatCount(),e.getMaxRepeatCount()],[o,i]=[t.getMinRepeatCount(),t.getMaxRepeatCount()],a=(...e)=>e.length<2||e.slice(0,-1).every((t,r)=>t<=e[r+1]),s=a(r,o,n,i),l=a(o,r,i,n);if(s||l)return new u(t.getChild(),Math.min(r,o),Math.max(n,i))}return e}}class E{static bringConcatenationToRightSide(e){let[t,r]=[e.getCar(),e.getCdr()];return t instanceof d?d.fromArray([t.getCar(),t.getCdr(),r]):e}static mergeConcatenationsIntoClosure(e){let t=e.expand(),r=t.length;for(;;){let e=!1;for(let[r,n]of t.entries())if(n instanceof u){let o=n.getChild();for(let i of t.keys()){if(i===r)continue;let[a,s]=[r+1,i];s<a&&([a,s]=[i,r-1]);let l=t.slice(a,s+1),c=d.fromArray(l);if(o.equals(c)){t.splice(Math.min(r,i),l.length+1,new u(o,n.getMinRepeatCount()+1,n.getMaxRepeatCount()+1)),e=!0;break}}if(e)break}if(!e)break}return t.length===r?e:d.fromArray(t)}static mergeSameClosures(e){let[t,r]=[e.getCar(),e.getCdr()];if(t instanceof u&&r instanceof u&&t.getChild().equals(r.getChild())){let e=t.getMinRepeatCount()+r.getMinRepeatCount(),n=t.getMaxRepeatCount()+r.getMaxRepeatCount();return new u(t.getChild(),e,n)}return e}}class j extends y{static memoMap=new t.HashMap;transformConcatenation(e){let t=this.transformSymbol(e.getCar()),r=this.transformSymbol(e.getCdr());if(t.equals(s.Epsilon))return r;if(r.equals(s.Epsilon))return t;e=new d(t,r);let n=E.bringConcatenationToRightSide(e);if(n!==e)return this.transformSymbol(n);let o=E.mergeSameClosures(e);if(o!==e)return this.transformSymbol(o);let i=E.mergeConcatenationsIntoClosure(e);return i!==e?this.transformSymbol(i):e}transformAlternation(e){let t=this.transformSymbol(e.getCar()),r=this.transformSymbol(e.getCdr());if(t.equals(r))return t;e=new h(t,r);let n=S.toOptionalIfIncludeEpsilon(e);if(e!==n)return this.transformSymbol(n);let o=S.omitAffix(e);return o!==e?this.transformSymbol(o):e}transformClosure(e){let t=this.transformSymbol(e.getChild());if(t.equals(s.Epsilon))return s.Epsilon;e=new u(t,e.getMinRepeatCount(),e.getMaxRepeatCount());let r=w.margeClosure(e);return e!==r?this.transformSymbol(r):e}transformLeaf(e){return e}transformNode(e){return e}transformSymbol(e){let t=j.memoMap.get(e);return null!==t||(t=super.transformSymbol(e),j.memoMap.set(e,t)),t}constructor(e){super(e)}transform(){return new A(this.transformSymbol(this.anAST.getRoot()),this.anAST.getName())}}class A extends Object{root;name;constructor(e=s.Epsilon,t=""){super(),this.root=e,this.name=t}equals(e){return null!=e&&e instanceof A&&this.name===e.name&&this.root.equals(e.root)}getName(){return this.name}getRoot(){return this.root}setName(e){this.name=e}setRoot(e){this.root=e}simplify(){return new j(this).transform()}toEBNF(){let e=new j(this).transform();return new m(e).transform()}toString(){return`AST(${this.root.toString()})`}}class O extends Object{from;to;symbol;constructor(e,t,r){super(),this.from=e,this.to=t,this.symbol=r}delete(){this.from.removeTransition(this),this.to.removeTransition(this)}getFrom(){return this.from}getSymbol(){return this.symbol}getTo(){return this.to}}class P extends Object{entries=new Set;exits=new Set;loops=new Set;name;constructor(e=""){super(),this.name=e}addEntry(e){this.entries.add(e)}addExits(e){this.exits.add(e)}merge(){let e=s.Epsilon;0!==this.loops.size&&(e=new u(h.fromArray(Array.from(this.loops).map(e=>e.getSymbol())))),this.entries.forEach(t=>{let r=t.getFrom();this.exits.forEach(n=>{let o=n.getTo();r.transitionTo(o,d.fromArray([t.getSymbol(),e,n.getSymbol()]))})}),this.entries.forEach(e=>{e.delete()}),this.exits.forEach(e=>{e.delete()})}getExits(){return Array.from(this.exits)}getEntries(){return Array.from(this.entries)}getLoops(){return Array.from(this.loops)}getName(){return this.name}removeTransition(e){this.exits.delete(e),this.entries.delete(e),this.loops.delete(e)}toString(){return this.name}transitionTo(e,t){let r=new O(this,e,t);e===this?this.loops.add(r):(this.addExits(r),e.addEntry(r))}}var k=r(716);class C extends Object{name;start;end;constructor(e=""){super(),this.name=e,this.start=new P("<S>"),this.end=new P("<E>")}addStart(e){this.start.transitionTo(e,s.Epsilon)}addEnd(e){e.transitionTo(this.end,s.Epsilon)}getName(){return this.name}_prettyPrint(r,n,o){let i=Array(n).fill(" ").join(""),a=[];if(a.push(r.toString(),e.bW),!o.has(r)){o.add(r);let s=new t.HashMap;r.getExits().concat(...r.getLoops()).forEach(e=>{let t=e.getSymbol(),r=e.getTo();s.setDefault(t,new Set),s.get(t)?.add(r)});let l=(e,t)=>{let r=e[0].toString(),n=t[0].toString();return r===n?0:r>n?1:-1};Array.from(s.entries()).sort((e,t)=>l(e,t)).forEach(([t,r])=>{let s=t.toString();a.push(i,s,e.bW),r.forEach(e=>{a.push(i,Array(s.length/2|0).fill(" ").join(""),"|---"),a.push(this._prettyPrint(e,n+4,o))})})}return a.join("")}prettyPrint(){k.log(this._prettyPrint(this.start,0,new Set))}setName(e){this.name=e}toAST(){for(;;){if(0==this.start.getExits().length)throw Error("error : startとendが繋がっていません。");let e=null;for(let t of this.start.getExits())if(t.getTo()!==this.end){e=t.getTo();break}if(null===e)break;e.merge()}return new A(h.fromArray(this.start.getExits().map(e=>e.getSymbol())),this.name)}}class I extends Object{isEnd=!1;isStart=!1;syntaxDiagram;constructor(e){super(),this.syntaxDiagram=e}connectTo(e){this.syntaxDiagram.addConnection(this,e)}disconnectFrom(e){this.syntaxDiagram.removeConnection(this,e)}getNext(){return new Set(this.syntaxDiagram.getConnections().get(this))}getBelongingSyntaxDiagram(){return this.syntaxDiagram}remove(){this.syntaxDiagram.removeElement(this)}toString(){let e=this.constructor.name,t=Array.from(this.getNext()).map(e=>`${e.constructor.name}('${e.getName()}')`).join(", ");return`${e}('${this.getName()}') => [ ${t} ]`}}class T extends I{aName;constructor(e,t){super(e),this.aName=t}getName(){return this.aName}setName(e){this.aName=e}toASTSymbol(){return new s(this.aName)}}class N extends I{bindSyntaxDiagram;constructor(e,t){super(e),this.bindSyntaxDiagram=t}getName(){return this.bindSyntaxDiagram.getName()}getBindSyntaxDiagram(){return this.bindSyntaxDiagram}setName(e){this.bindSyntaxDiagram.setName(e)}toASTSymbol(){return new l(this.getName())}}class R extends Object{elements=new Set;connections=new Map;name;constructor(e){super(),this.name=e}addConnection(e,t){if(!this.elements.has(e)||!this.elements.has(t))throw Error("The nodes to be connected must belong to the same SyntaxDiagram.");let r=this.connections.get(e)??new Set;this.connections.set(e,r),r.add(t)}createLeaf(e){let t=new T(this,e);return this.elements.add(t),t}createNode(e){let t=new N(this,e);return this.elements.add(t),t}getConnections(){return new Map(this.connections)}getElements(){return new Set(this.elements)}getName(){return this.name}removeElement(e){this.elements.delete(e),this.connections.delete(e),this.connections.forEach(t=>{t.delete(e)})}removeConnection(e,t){let r=this.connections.get(e);void 0!==r&&r.delete(t)}setName(e){this.name=e}toAST(){return this.toNFA().toAST()}toEBNF(){return this.toAST().toEBNF()}toNFA(){let e=new C(this.getName()),t=new Map;return this.elements.forEach(r=>{let n=new P(`State: ${r.getName()}`);r.isStart&&e.addStart(n),r.isEnd&&e.addEnd(n),t.set(r,n)}),this.connections.forEach((e,r)=>{let n=t.get(r);void 0!==n&&e.forEach(e=>{let o=t.get(e);void 0!==o&&n.transitionTo(o,r.toASTSymbol())})}),e}toString(){return Array.from(this.elements.values()).map(e=>e.toString()).join(e.bW)}}})(),n})()}},function(e){e.O(0,[107,774,888,179],function(){return e(e.s=7314)}),_N_E=e.O()}]);